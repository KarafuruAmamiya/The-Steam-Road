namespace = persian_flavor
namespace = persian_renaissance
namespace = persian_eclipse
#namespace = karakum_frontier

#Persian Flavor
persian_flavor.1 = { #The Rights of Zoroastrians
	type = country_event
	title = persian_flavor.1.t
	desc = persian_flavor.1.d
	flavor =  persian_flavor.1.f
	duration = 3
	event_image = {
		video = "asia_hinduism_sikhism"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_religion.dds"
	
	trigger = {
		#triggered by decision
	}
	option = { #Give them only the slightest basic rights
		name = persian_flavor.1.a
		default_option = yes
		add_radicals = {
			religion = rel:shiite
			value = medium_radicals
		}
		
		ai_chance = {
			base = 25
		}
	}
	option = { #Religious minorities deserve equal status to other citizens of the Empire
		name = persian_flavor.1.b
		random_scope_state = {
			limit = {
				state_region = s:STATE_YAZD
			}
			add_modifier = {
				name = council_of_zoroastrians
				months = -1
			}
		}
		add_radicals = {
			religion = rel:shiite
			value = large_radicals
		}
		add_loyalists = {
			religion = rel:zoroastrian
			value = large_radicals
		}
		ig:ig_devout = {
			add_modifier = {
				name = tolerated_heathens
				months = long_modifier_time
			}
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_variable = zandism_tolerated_heathens }
				}
				set_variable = zandism_tolerated_heathens
			}
		}
		
		ai_chance = {
			base = 25
		}
	}
}

persian_flavor.2 = { #Fire Temple vandalized!
	type = country_event
	placement = scope:yazd_scope
	title = persian_flavor.2.t
	desc = persian_flavor.2.d
	flavor =  persian_flavor.2.f
	duration = 3
	event_image = {
		video = "unspecific_vandalized_storefront"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_fire.dds"
	
	trigger = {
	}
	
	immediate = {
		random_scope_state = {
			limit = {
				state_region = s:STATE_YAZD
			}
			save_scope_as = yazd_scope
		}
	}
	
	option = { #Tolerate the violence
		name = persian_flavor.2.a
		default_option = yes
		scope:yazd_scope = {
			add_radicals_in_state = {
				value = large_radicals
				religion = rel:zoroastrian
			}
			add_modifier = {
				name = anti_zoroastrian_tolerated
				months = long_modifier_time
			}
		}
	}
	option = { #Punish the perpetrators
		name = persian_flavor.2.b
		scope:yazd_scope = {
			add_radicals_in_state = {
				value = large_radicals
				religion = rel:shiite
			}
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_variable = zandism_religious_conflicts }
				}
				set_variable = zandism_religious_conflicts
			}
		}
	}
}

# Mohammad Hussain Zand
persian_flavor.3 = {
	type = country_event
	placement = scope:arabestan_state
	title = persian_flavor.3.t
	desc = persian_flavor.3.d
	flavor = persian_flavor.3.f

	duration = 3

	event_image = {
		video = "europenorthamerica_political_extremism"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	minor_left_icon = scope:mohammad_zand_scope

	icon = "gfx/interface/icons/event_icons/event_revolt.dds"

	trigger = {
		ig:ig_devout = {
			is_marginal = no
			ig_approval <= 0	
		}
		game_date >= 1865.1.1
		game_date < 1900.1.1
		NOT = { has_global_variable = mohammad_zand_var }
		any_scope_state = {
			state_region = s:STATE_KHUZESTAN
		}
	}

	immediate = {
		set_global_variable = mohammad_zand_var
		create_character = {
			template = per_mohammad_zand_character_template
			on_created = {
				set_variable = mohammad_zand
			}
		}
		random_scope_character = {
			limit = {
				has_variable = mohammad_zand
			}
			save_scope_as = mohammad_zand_scope
		}
		random_scope_state = {
			limit = {
				state_region = s:STATE_KHUZESTAN
			}
			save_scope_as = arabestan_state
		}
	}

	option = {
		name = persian_flavor.3.a #Suppress him
		default_option = yes
		show_as_tooltip = {
			create_character = {
				template = per_mohammad_zand_character_template
			}
		}
		scope:arabestan_state = {
			convert_population = {
				target = rel:zandism
				value = 0.05
			}
			add_radicals_in_state = {
				religion = rel:zandism
				value = 1
			}
		}
		
		ai_chance = {
			base = 25
		}
	}
	option = {
		name = persian_flavor.3.b #Support his rhetorics
		show_as_tooltip = {
			create_character = {
				template = per_mohammad_zand_character_template
			}
		}
		scope:mohammad_zand_scope = {
			set_as_interest_group_leader = yes
		}
		
		scope:arabestan_state = {
			convert_population = {
				target = rel:zandism
				value = 0.1
			}
		}
		
		ai_chance = {
			base = 0
		}
	}
}

#persian_flavor.4 = { #The Iranian Identity (should be its own JE)
#	type = country_event
#	title = persian_flavor.4.t
#	desc = persian_flavor.4.d
#	flavor =  persian_flavor.4.f
#	duration = 3
#	event_image = {
#		video = "asia_hinduism_sikhism"
#	}
#
#	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
#	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
#	
#	trigger = {
#		has_technology_researched = pan-nationalism
#		has_variable = persian_renaissance_romantic_nationalism
#		NOT = { has_variable = iranian_identity }
#		NOR = {
#			has_law = law_type:law_state_religion
#			has_law = law_type:law_ethnostate
#			has_law = law_type:law_national_supremacy
#		}
#	}
#	
#	immediate = {
#		set_variable = iranian_identity
#	}
#	
#	option = { #All Iranians are citizens of the empire
#		name = persian_flavor.4.a
#		custom_tooltip = {
#			text = united_iran_tt
#			set_variable = united_iran
#		}
#		add_primary_culture = cu:luri
#		add_primary_culture = cu:kurdish
#		add_primary_culture = cu:caspian
#		add_primary_culture = cu:pashtun
#		add_primary_culture = cu:tajik
#		add_primary_culture = cu:baluchi
#		
#		every_interest_group = {
#			limit = {
#				OR = {
#					leader = {
#						law_stance = {
#							law = law_type:law_national_supremacy
#							value > neutral
#						}
#						law_stance = {
#							law = law_type:law_ethnostate
#							value > neutral
#						}
#					}
#					law_stance = {
#						law = law_type:law_national_supremacy
#						value > neutral
#					}
#					law_stance = {
#						law = law_type:law_ethnostate
#						value > neutral
#					}
#				}
#			}
#			add_modifier = {
#				name = rejected_iranian_identity
#				months = normal_modifier_time
#			}
#		}
#		
#		hidden_effect = {
#			if = {
#				limit = { NOT = { has_variable = zandism_minorities } }
#				set_variable = zandism_minorities
#			}
#		}
#		
#		ai_chance = {
#			base = 25
#		}
#	}
#	
#	option = { #The empire should be ruled by Persians
#		name = persian_flavor.4.b
#		default_option = yes
#		remove_primary_culture = cu:azerbaijani
#		add_radicals = {
#			culture = cu:azerbaijani
#			value = large_radicals
#		}
#		add_radicals = {
#			culture = cu:luri
#			value = large_radicals
#		}
#		add_radicals = {
#			culture = cu:kurdish
#			value = large_radicals
#		}
#		add_radicals = {
#			culture = cu:caspian
#			value = large_radicals
#		}
#		add_radicals = {
#			culture = cu:pashtun
#			value = large_radicals
#		}
#		add_radicals = {
#			culture = cu:tajik
#			value = large_radicals
#		}
#		add_radicals = {
#			culture = cu:baluchi
#			value = large_radicals
#		}
#		
#		add_modifier = {
#			name = russification_modifier
#			months = long_modifier_time
#		}
#		
#		every_interest_group = {
#			limit = {
#				OR = {
#					leader = {
#						law_stance = {
#							law = law_type:law_national_supremacy
#							value > neutral
#						}
#						law_stance = {
#							law = law_type:law_ethnostate
#							value > neutral
#						}
#					}
#					law_stance = {
#						law = law_type:law_national_supremacy
#						value > neutral
#					}
#					law_stance = {
#						law = law_type:law_ethnostate
#						value > neutral
#					}
#				}
#			}
#			add_modifier = {
#				name = persian_ruled_empire
#				months = normal_modifier_time
#			}
#		}
#		
#		ai_chance = {
#			base = 75
#		}
#	}
#}

# Mirza Aqa Khan Kermani
persian_flavor.5 = {
	type = country_event
	placement = root
	title = persian_flavor.5.t
	desc = persian_flavor.5.d
	flavor = persian_flavor.5.f

	duration = 3

	event_image = {
		video = "middleeast_engineer_blueprint"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	minor_left_icon = scope:kermani_scope

	icon = "gfx/interface/icons/event_icons/event_academia.dds"

	trigger = {
		c:PER ?= this
		ig:ig_intelligentsia = {
			is_marginal = no
			ig_approval <= 0	
		}
		game_date >= 1854.1.1
		game_date < 1900.1.1
		NOT = { has_global_variable = kermani_var }
		any_scope_state = {
			state_region = s:STATE_KERMAN
		}
		any_country = {
			NOT = { root = this }
			OR = {
				country_is_in_europe = yes
				gunpowder_empire_trigger = yes
			}
			OR = {
				has_interest_marker_in_region = region_arabic
				has_interest_marker_in_region = region_anatolia
				has_interest_marker_in_region = region_persia
			}
		}
	}

	immediate = {
		set_global_variable = kermani_var
		create_character = {
			template = per_kermani_character_template
			on_created = {
				set_variable = kermani
			}
		}
		random_scope_character = {
			limit = {
				has_variable = kermani
			}
			save_scope_as = kermani_scope
		}
		random_scope_state = {
			limit = {
				state_region = s:STATE_KERMAN
			}
			save_scope_as = kerman_state
		}
		random_scope_state = {
			limit = {
				state_region = s:STATE_ISFAHAN
			}
			save_scope_as = isfahan_state
		}
		if = {
			limit = {
				NOT = { has_technology_researched = nationalism }
			}
			add_technology_progress = { progress = 2500 technology = nationalism }
		}
		if = {
			limit = {
				NOT = { has_technology_researched = egalitarianism }
			}
			add_technology_progress = { progress = 2500 technology = egalitarianism }
		}
	}

	option = {
		name = persian_flavor.5.a
		default_option = yes
		ai_chance = {
			base = 0
			modifier = {
				trigger = {
					NOR = {
						has_strategy = ai_strategy_progressive_agenda
						has_strategy = ai_strategy_egalitarian_agenda
						has_strategy = ai_strategy_nationalist_agenda
					}
				}
				add = 100
			}
		}
		scope:kermani_scope = {
			interest_group = {
				add_modifier = {
					name = modifier_kermani_in_exile
					months = normal_modifier_time
					is_decaying = yes
				}
			}
			exile_character_with_martyrdom = yes
		}
		
		hidden_effect = {
			random_country = {
				limit = {
					NOT = { root = this }
					OR = {
						country_is_in_europe = yes
						gunpowder_empire_trigger = yes
					}
					OR = {
						has_interest_marker_in_region = region_arabic
						has_interest_marker_in_region = region_anatolia
						has_interest_marker_in_region = region_persia
					}
				}
				trigger_event = { id = persian_flavor.6 days = 3 }
			}
		}
	}
	option = {
		name = persian_flavor.5.b
		ai_chance = {
			base = 0
			modifier = {
				trigger = {
					OR = {
						has_strategy = ai_strategy_progressive_agenda
						has_strategy = ai_strategy_egalitarian_agenda
						has_strategy = ai_strategy_nationalist_agenda
					}
				}
				add = 100
			}
		}
		show_as_tooltip = {
			create_character = {
				template = per_kermani_character_template
			}
		}
		capital = {
			add_radicals_in_state = {
				value = small_radicals
				pop_type = academics
			}
		}
	}
}

# Mirza Aqa Khan Kermani (Exile)
persian_flavor.6 = {
	type = country_event
	placement = root
	title = persian_flavor.6.t
	desc = persian_flavor.6.d
	flavor = persian_flavor.6.f

	duration = 3

	event_image = {
		video = "middleeast_engineer_blueprint"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	minor_left_icon = scope:kermani_scope

	icon = "gfx/interface/icons/event_icons/event_academia.dds"

	immediate = {
		c:PER = {
			save_scope_as = per_scope
		}
		random_character_in_exile_pool = {
			limit = {
				has_variable = kermani
			}
			transfer_character = root
			save_scope_as = kermani_scope
		}
		if = {
			limit = {
				NOT = { has_technology_researched = nationalism }
			}
			add_technology_progress = { progress = 2500 technology = nationalism }
		}
		if = {
			limit = {
				NOT = { has_technology_researched = egalitarianism }
			}
			add_technology_progress = { progress = 2500 technology = egalitarianism }
		}
	}
	
	option = {
		name = persian_flavor.6.a
		default_option = yes
		show_as_tooltip = {
			create_character = {
				template = per_kermani_character_template
			}
		}
	}
}

# Rise of Constitutionalism Movements
persian_flavor.7 = {
	type = country_event
	placement = root
	title = persian_flavor.7.t
	desc = persian_flavor.7.d
	flavor = persian_flavor.7.f

	duration = 3

	event_image = {
		video = "votp_agitator_speaking"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"
	
	trigger = {
		c:PER ?= this
		NOT = { has_variable = shah_mourning } #Give Mohammad Sadiq time to mourn his dad please
		OR = {
			has_law = law_type:law_autocracy
			has_law = law_type:law_oligarchy
			has_law = law_type:law_landed_voting
			has_law = law_type:law_state_religion
			has_law = law_type:law_denominational_exclusion
			has_law = law_type:law_legacy_slavery
			has_law = law_type:law_debt_slavery
			has_law = law_type:law_slave_trade
			has_law = law_type:law_serfdom
			has_law = law_type:law_tenant_farmers
			has_law = law_type:law_no_womens_rights
		}
		has_technology_researched = nationalism
		has_technology_researched = egalitarianism
		any_scope_character = {
			is_ruler = yes
			has_ideology = ideology:ideology_persian_constitutionalist
		}
		NOT = { has_variable = constitutionalism_var }
	}

	immediate = {
		set_variable = constitutionalism_var
	}
	
	option = {
		name = persian_flavor.7.a
		default_option = yes
		add_journal_entry = { type = je_constitutional_reformation }
		ig:ig_intelligentsia = {
			set_ig_bolstering = yes
		}
		
		ai_chance = {
			base = 0
			modifier = {
				trigger = {
					OR = {
						has_strategy = ai_strategy_progressive_agenda
						has_strategy = ai_strategy_egalitarian_agenda
						has_strategy = ai_strategy_nationalist_agenda
					}
				}
				add = 100
			}
		}
	}
	
	option = {
		name = persian_flavor.7.b
		set_variable = rejected_constitutionalism
		add_radicals = {
			interest_group = ig:ig_intelligentsia
			value = medium_radicals
		}
		ig:ig_intelligentsia = {
			leader = {
				set_ideology = ideology:ideology_radical
			}
			add_modifier = {
				name = refused_reforms
				months = long_modifier_time
				is_decaying = yes
			}
			set_ig_suppression = yes
		}
		
		ai_chance = {
			base = 0
			modifier = {
				trigger = {
					NOR = {
						has_strategy = ai_strategy_progressive_agenda
						has_strategy = ai_strategy_egalitarian_agenda
						has_strategy = ai_strategy_nationalist_agenda
					}
				}
				add = 100
			}
		}
	}
}

# Kermani's Critiques
persian_flavor.8 = {
	type = country_event
	placement = root
	title = persian_flavor.8.t
	desc = persian_flavor.8.d
	flavor = persian_flavor.8.f

	duration = 3

	event_image = {
		video = "votp_prison"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_academia.dds"
	
	minor_left_icon = scope:kermani_scope
	
	trigger = {
		c:PER ?= root
		OR = {
			any_country = {
				NOT = { c:PER ?= this }
				any_scope_character = {
					has_variable = kermani
				}
			}
			any_character_in_exile_pool = {
				has_variable = kermani
			}
		}
		any_scope_character = {
			has_variable = prime_minister_trigger
		}
		any_scope_state = {
			has_modifier = bahai_persecution
		}
		has_variable = babi_assassination_attempt
		has_modifier = babi_reign_of_terror
		NOT = { has_variable = kermani_critique }
	}

	immediate = {
		c:PER = {
			save_scope_as = per_scope
		}
		set_variable = kermani_critique
		random_character = {
			limit = { has_variable = kermani }
			save_scope_as = kermani_scope
		}
		random_scope_character = {
			limit = {
				has_variable = prime_minister_trigger
			}
			save_scope_as = prime_minister_scope
			interest_group = {
				save_scope_as = prime_minister_ig_scope
			}
		}
	}
	
	option = {
		name = persian_flavor.8.a
		trigger = {
			any_country = {
				NOT = { c:PER ?= this }
				any_scope_character = {
					has_variable = kermani
				}
			}
		}
		default_option = yes
		random_country = {
			limit = {
				NOT = { c:PER ?= this }
				any_scope_character = {
					has_variable = kermani
				}
			}
			trigger_event = { id = persian_flavor.9 days = 3 }
		}
	}
	
	option = {
		name = persian_flavor.8.b
		trigger = {
			any_character_in_exile_pool = {
				has_variable = kermani
			}
		}
		
		random_character_in_exile_pool = {
			limit = { has_variable = kermani }
			transfer_character = root
		}
		
		trigger_event = { id = persian_flavor.10 days = 7 }
	}
	
	option = {
		name = persian_flavor.8.c
		scope:prime_minister_ig_scope = {
			add_modifier = {
				name = kermani_scot_free
				months = normal_modifier_time
			}
		}
	}
}

# Persia Demands Kermani's Return
persian_flavor.9 = {
	type = country_event
	placement = root
	title = persian_flavor.9.t
	desc = persian_flavor.9.d
	flavor = persian_flavor.9.f

	duration = 3

	event_image = {
		video = "votp_prison"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	minor_left_icon = scope:kermani_scope

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	immediate = {
		root = {
			save_scope_as = shelter_scope
		}
		c:PER = {
			save_scope_as = per_scope
		}
		random_scope_character = {
			limit = {
				has_variable = kermani
			}
			save_scope_as = kermani_scope
		}
	}
	
	option = {
		name = persian_flavor.9.a
		default_option = yes
		scope:kermani_scope = {
			transfer_character = c:PER
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						has_interest_marker_in_region = region_arabic
						has_interest_marker_in_region = region_anatolia
						has_interest_marker_in_region = region_persia
					}
				}
				post_notification = returned_kermani
			}
			c:PER = {
				trigger_event = { id = persian_flavor.10 days = 7 }
			}
		}
		
		ai_chance = {
			base = 0
			modifier = {
				trigger = {
					NOR = {
						has_strategy = ai_strategy_progressive_agenda
						has_strategy = ai_strategy_egalitarian_agenda
						has_strategy = ai_strategy_nationalist_agenda
					}
				}
				add = 100
			}
		}
	}
	
	option = {
		name = persian_flavor.9.b
		change_relations = {
			country = c:PER
			value = -20
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						has_interest_marker_in_region = region_arabic
						has_interest_marker_in_region = region_anatolia
						has_interest_marker_in_region = region_persia
					}
				}
				post_notification = did_not_return_kermani
			}
		}
		
		ai_chance = {
			base = 0
			modifier = {
				trigger = {
					OR = {
						has_strategy = ai_strategy_progressive_agenda
						has_strategy = ai_strategy_egalitarian_agenda
						has_strategy = ai_strategy_nationalist_agenda
					}
				}
				add = 100
			}
		}
	}
}

# Kermani's Execution
persian_flavor.10 = {
	type = country_event
	placement = root
	title = persian_flavor.10.t
	desc = persian_flavor.10.d
	flavor = persian_flavor.10.f

	duration = 3

	event_image = {
		video = "votp_hostile_court"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	minor_left_icon = scope:kermani_scope

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	immediate = {
		random_scope_character = {
			limit = {
				has_variable = kermani
			}
			save_scope_as = kermani_scope
		}
	}
	
	option = {
		name = persian_flavor.10.a
		default_option = yes
		scope:kermani_scope = {
			kill_character = yes
		}
		
		add_radicals = {
			interest_group = ig:ig_intelligentsia
			value = large_radicals
		}
		
		ig:ig_intelligentsia = {
			add_modifier = {
				name = executed_kermani
				months = normal_modifier_time
				is_decaying = yes
			}
		}
	}
}

# Constitutional Reformation Succeeds (Creation of the Majlis)
persian_flavor.11 = {
	type = country_event
	placement = root
	title = persian_flavor.11.t
	desc = persian_flavor.11.d
	flavor = persian_flavor.11.f

	duration = 3

	event_image = {
		video = "votp_agitator_speaking"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	option = {
		name = persian_flavor.11.a
		default_option = yes
		add_modifier = {
			name = constitutional_reformation
			months = normal_modifier_time
		}
		ig:ig_intelligentsia = {
			add_modifier = {
				name = reformed_constitution
				months = normal_modifier_time
			}
		}
	}
	option = {
		name = persian_flavor.11.b
		trigger = {
			has_law = law_type:law_shared_roots
		}
		add_modifier = {
			name = constitutional_reformation_religion
			months = normal_modifier_time
		}
		ig:ig_intelligentsia = {
			add_modifier = {
				name = reformed_constitution
				months = normal_modifier_time
			}
		}
	}
	option = {
		name = persian_flavor.11.c
		trigger = {
			has_law = law_type:law_census_voting
		}
		add_modifier = {
			name = constitutional_reformation_suffrage
			months = normal_modifier_time
		}
		ig:ig_intelligentsia = {
			add_modifier = {
				name = reformed_constitution
				months = normal_modifier_time
			}
		}
	}
	option = {
		name = persian_flavor.11.d
		trigger = {
			has_law = law_type:law_homesteading
		}
		add_modifier = {
			name = constitutional_reformation_land_reform
			months = normal_modifier_time
		}
		ig:ig_intelligentsia = {
			add_modifier = {
				name = reformed_constitution
				months = normal_modifier_time
			}
		}
	}
	option = {
		name = persian_flavor.11.e
		trigger = {
			has_law = law_type:law_compulsory_primary_school
		}
		add_modifier = {
			name = constitutional_reformation_education
			months = normal_modifier_time
		}
		ig:ig_intelligentsia = {
			add_modifier = {
				name = reformed_constitution
				months = normal_modifier_time
			}
		}
	}
}

# Bazaar Merchants Complains About Western Goods
persian_flavor.12 = {
	type = country_event
	placement = root
	title = persian_flavor.12.t
	desc = persian_flavor.12.d
	flavor = persian_flavor.12.f

	duration = 3

	event_image = {
		video = "asia_farmers_market"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"
	
	cooldown = { months = normal_modifier_time }
	
	trigger = {
		c:PER ?= this
		has_technology_researched = stock_exchange
		NOT = { has_law = law_type:law_protectionism }
		NOT = { has_variable = protect_bazaars }
		any_market = {
			owner = root
			any_trade_route = {
				OR = {
					goods = g:clothes
					goods = g:luxury_clothes
					goods = g:furniture
					goods = g:luxury_furniture
					goods = g:silk
					goods = g:fabric
					goods = g:fish
					goods = g:groceries
					goods = g:dye
					goods = g:glass
					goods = g:porcelain
					goods = g:tools
					goods = g:meat
					goods = g:fruit
					goods = g:liquor
					goods = g:wine
					goods = g:tea
					goods = g:coffee
					goods = g:sugar
					goods = g:tobacco
					goods = g:fine_art
				}
				exporter.owner = {
					country_is_in_europe = yes
					gunpowder_empire_trigger = no
				}
				is_trade_route_productive = yes
			}
		}
	}
	
	immediate = {
		ig:ig_petty_bourgeoisie = {
			save_scope_as = bazaari_ig
		}
		ig:ig_industrialists = {
			save_scope_as = industrialists_ig
		}
		random_market = {
			limit = {
				owner = root
				any_trade_route = {
					OR = {
						goods = g:clothes
						goods = g:luxury_clothes
						goods = g:furniture
						goods = g:luxury_furniture
						goods = g:silk
						goods = g:fabric
						goods = g:fish
						goods = g:groceries
						goods = g:dye
						goods = g:glass
						goods = g:porcelain
						goods = g:tools
						goods = g:meat
						goods = g:fruit
						goods = g:liquor
						goods = g:wine
						goods = g:tea
						goods = g:coffee
						goods = g:sugar
						goods = g:tobacco
						goods = g:fine_art
					}
					exporter.owner = {
						country_is_in_europe = yes
						gunpowder_empire_trigger = no
					}
					is_trade_route_productive = yes
				}
			}
			random_trade_route = {
				limit = {
					OR = {
						goods = g:clothes
						goods = g:luxury_clothes
						goods = g:furniture
						goods = g:luxury_furniture
						goods = g:silk
						goods = g:fabric
						goods = g:fish
						goods = g:groceries
						goods = g:dye
						goods = g:glass
						goods = g:porcelain
						goods = g:tools
						goods = g:meat
						goods = g:fruit
						goods = g:liquor
						goods = g:wine
						goods = g:tea
						goods = g:coffee
						goods = g:sugar
						goods = g:tobacco
						goods = g:fine_art
					}
					exporter.owner = {
						country_is_in_europe = yes
						gunpowder_empire_trigger = no
					}
					is_trade_route_productive = yes
				}
				exporter.owner = {
					limit = {
						country_is_in_europe = yes
						gunpowder_empire_trigger = no
					}
					save_scope_as = exporter_country
				}
			}
		}
	}
	
	option = { # They should deal with it!
		name = persian_flavor.12.a
		default_option = yes
		
		scope:bazaari_ig = {
			add_modifier = {
				name = domestic_merchants_scorned
				months = normal_modifier_time
			}
		}
		every_scope_state = {
			limit = {
				ig_state_pol_strength_share = {
					target = scope:bazaari_ig
					value > 0.1
				}
			}
			add_modifier = {
				name = modifier_protectionism_support
				months = long_modifier_time
			}
		}
	}
	option = { # If they can complain, they can improve their products!
		name = persian_flavor.12.b
		scope:bazaari_ig = {
			add_modifier = {
				name = domestic_merchants_scorned_max
				months = normal_modifier_time
			}
		}
		scope:industrialists_ig = {
			add_modifier = {
				name = respected_market_freedom
				months = normal_modifier_time
			}
		}
		every_scope_state = {
			limit = {
				ig_state_pol_strength_share = {
					target = scope:bazaari_ig
					value > 0.1
				}
			}
			add_modifier = {
				name = modifier_protectionism_support
				months = long_modifier_time
			}
		}
	}
	option = { # We need to protect our bazaars
		name = persian_flavor.12.c
		trigger = {
			scope:bazaari_ig = {
				is_in_government = yes
				is_marginal = no
			}
			NOT = { has_journal_entry = je_government_petition }
		}
		set_variable = protect_bazaars
		add_journal_entry = { type = je_government_petition }
		every_scope_state = {
			limit = {
				ig_state_pol_strength_share = {
					target = scope:bazaari_ig
					value > 0.1
				}
			}
			add_modifier = {
				name = modifier_protectionism_support
				months = long_modifier_time
			}
		}
	}
}

# Rise of Babism
persian_flavor.13 = {
	type = country_event
	placement = scope:tehran_state
	title = persian_flavor.13.t
	desc = persian_flavor.13.d
	flavor = persian_flavor.13.f

	duration = 3

	event_image = {
		video = "middleeast_islam"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_religion.dds"
	
	minor_left_icon = scope:bab_scope
	
	immediate = {
		c:PER ?= this
		game_date >= 1844.1.1
		NOT = { has_global_variable = bab_var }
		any_scope_state = {
			state_region = s:STATE_IRAKAJEMI
		}
	}

	immediate = {
		set_global_variable = bab_var
		create_character = {
			template = per_bab_character_template
			on_created = {
				set_variable = bab
			}
		}
		random_scope_character = {
			limit = {
				has_variable = bab
			}
			save_scope_as = bab_scope
		}
		random_scope_state = {
			limit = {
				state_region = s:STATE_IRAKAJEMI
			}
			save_scope_as = tehran_state
		}
	}

	option = {
		name = persian_flavor.13.a
		default_option = yes
		show_as_tooltip = {
			create_character = {
				template = per_bab_character_template
			}
		}
		scope:bab_scope = {
			add_modifier = {
				name = modifier_bab_popularity
				years = 6
				is_decaying = yes
			}
		}
		hidden_effect = {
			every_scope_state = {
				convert_population = {
					target = rel:bahai
					value = 0.001
				}
			}
		}
		add_journal_entry = { type = je_rise_of_bahaism }
	}
}

# Unrest Among the Clergy
persian_flavor.14 = {
	type = country_event
	placement = root
	title = persian_flavor.14.t
	desc = persian_flavor.14.d
	flavor = persian_flavor.14.f

	duration = 3

	event_image = {
		video = "middleeast_courtroom_upheaval"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_religion.dds"
	
	trigger = {
		ig:ig_devout = {
			is_in_government = yes
		}
		has_law = law_type:law_state_religion
		any_scope_state = {
			state_region = {
				is_homeland = cu:persian
			}
			religion_percent_state = {
			   target = rel:bahai
			   value > 0.01
			}
		}
		NOT = { has_variable = bahai_persecution_start }
	}
	
	immediate = {
		ig:ig_devout = {
			save_scope_as = ulemma_scope
			leader = {
				save_scope_as = devout_leader_scope
			}
		}
		random_scope_state = {
			limit = {
				state_region = {
					is_homeland = cu:persian
				}
				religion_percent_state = {
				   target = rel:bahai
				   value > 0.01
				}
			}
			save_scope_as = bahai_state
		}
		set_variable = bahai_persecution_start
	}
	
	option = {
		name = persian_flavor.14.a
		default_option = yes
		custom_tooltip = {
			text = babi_persecution_tt
			every_scope_state = {
				kill_population_percent_in_state = {
					percent = 0.10
					religion = rel:bahai
				}
				add_modifier = {
					name = bahai_persecution
					months = -1
				}
			}
		}
		scope:bahai_state = {
			add_modifier = {
				name = bahai_scare
				months = normal_modifier_time
			}
		}
		
		trigger_event = { id = persian_flavor.15 months = 1 }
	}
}

# Trial of the Báb
persian_flavor.15 = {
	type = country_event
	placement = scope:tabriz_scope
	title = persian_flavor.15.t
	desc = persian_flavor.15.d
	flavor = persian_flavor.15.f

	duration = 3

	event_image = {
		video = "votp_hostile_court"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	minor_left_icon = scope:bab_char_scope
	
	immediate = {
		random_scope_state = {
			limit = { state_region = s:STATE_TABRIZ }
			save_scope_as = tabriz_scope
		}
		random_scope_character = {
			limit = {
				has_template = per_bab_character_template
			}
			save_scope_as = bab_char_scope
		}
		ig:ig_devout = {
			save_scope_as = ulemma_scope
		}
	}
	
	option = {
		name = persian_flavor.15.a #Follow the clergy's demands
		default_option = yes
		add_radicals = {
			religion = rel:bahai
			value = large_radicals
		}
		scope:bab_char_scope = {
			add_modifier = {
				name = modifier_political_martyr
				months = 24
				is_decaying = yes
			}
		}
	}
	
	option = {
		name = persian_flavor.15.b #Leave the Báb untouched
		scope:ulemma_scope = {
			add_modifier = {
				name = tolerated_the_bab
				months = 12
			}
		}
	}
}

# The Waning of Babism Movement
persian_flavor.16 = {
	type = country_event
	placement = scope:urmia_scope
	title = persian_flavor.16.t
	desc = persian_flavor.16.d
	flavor = persian_flavor.16.f

	duration = 3

	event_image = {
		video = "middleeast_middleclass_cafe"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	gui_window = event_window_1char_tabloid
	
	left_icon = scope:prime_minister_scope
	
	immediate = {
		random_scope_state = {
			limit = { state_region = s:STATE_URMIA }
			save_scope_as = urmia_scope
		}
		random_scope_character = {
			limit = {
				has_template = per_bab_character_template
			}
			save_scope_as = bab_char_scope
		}
		random_scope_character = {
			limit = {
				has_variable = prime_minister_trigger
			}
			save_scope_as = prime_minister_scope
			interest_group = {
				save_scope_as = prime_minister_ig_scope
			}
		}
	}
	
	option = {
		name = persian_flavor.16.a #This is an opportunity to finally execute him
		default_option = yes
		trigger_event = { id = persian_flavor.22 days = 3 }
	}
	option = {
		name = persian_flavor.16.b #Take a lenient stance
		trigger = {
			NOT = { has_law = law_type:law_state_religion }
			ig:ig_devout = {
				is_in_government = no
			}
		}
		scope:prime_minister_ig_scope = {
			add_modifier = {
				name = tolerated_heathens
				months = 12
			}
		}
		ig:ig_devout = {
			add_modifier = {
				name = tolerated_heathens
				months = 12
			}
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_variable = zandism_tolerated_heathens }
				}
				set_variable = zandism_tolerated_heathens
			}
		}
	}
}

# Helmand River Conflict
persian_flavor.17 = {
	type = country_event
	placement = scope:conflict_state
	title = persian_flavor.17.t
	desc = persian_flavor.17.d
	flavor = persian_flavor.17.f

	duration = 3

	event_image = {
		video = "asia_dead_cattle_poor_harvest"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_agriculture.dds"
	
	trigger = {
		has_technology_researched = mechanical_tools
		NOT = {
			has_variable = helmand_river_conflict
		}
		any_scope_state = {
			is_incorporated = yes
			any_scope_building = {
				count >= 3
				OR = {
					is_building_group = bg_agriculture
					is_building_group = bg_plantations
				}
				level >= 10
			}
			OR = {
				has_state_trait = state_trait_helmand_river
				any_neighbouring_state = {
					has_state_trait = state_trait_helmand_river
				}
			}
		}
		OR = {
			any_scope_state = {
				has_state_trait = state_trait_helmand_river
				NOT = { is_homeland_of_country_cultures = root }
			}
			any_country = {
				NOR = {
					root = this
					is_country_type = decentralized
				}
				any_scope_state = {
					has_state_trait = state_trait_helmand_river
					is_incorporated = yes
				}
			}
		}
	}
	
	immediate = {
		set_variable = helmand_river_conflict
		random_scope_state = {
			limit = {
				is_incorporated = yes
				any_scope_building = {
					count >= 3
					OR = {
						is_building_group = bg_agriculture
						is_building_group = bg_plantations
					}
					level >= 10
				}
				OR = {
					has_state_trait = state_trait_helmand_river
					any_neighbouring_state = {
						has_state_trait = state_trait_helmand_river
					}
				}
			}
			save_scope_as = conflict_state
		}
	}
	
	option = {
		name = persian_flavor.17.a #Prioritize the water for irrigation
		default_option = yes
		
		every_scope_state = {
			limit = {
				is_incorporated = yes
				any_scope_building = {
					count >= 3
					OR = {
						is_building_group = bg_agriculture
						is_building_group = bg_plantations
					}
					level >= 10
				}
				OR = {
					has_state_trait = state_trait_helmand_river
					any_neighbouring_state = {
						has_state_trait = state_trait_helmand_river
					}
				}
			}
			add_modifier = {
				name = helmand_river_irrigation
				months = -1
			}
		}
		if = {
			limit = {
				any_scope_state = {
					has_state_trait = state_trait_helmand_river
					NOT = { is_homeland_of_country_cultures = root }
					NOT = { scope:conflict_state = this }
				}
			}
			every_scope_state = {
				limit = {
					NOT = { is_homeland_of_country_cultures = root }
					NOT = { scope:conflict_state = this }
					has_state_trait = state_trait_helmand_river
				}
				add_modifier = {
					name = river_water_diverted
					months = -1
				}
				add_radicals_in_state = {
					value = large_radicals
				}
			}
		}
		if = {
			limit = {
				any_country = {
					NOR = {
						root = this
						is_country_type = decentralized
					}
					any_scope_state = {
						has_state_trait = state_trait_helmand_river
						is_incorporated = yes
					}
				}
			}
			every_country = {
				limit = {
					NOR = {
						root = this
						is_country_type = decentralized
					}
					any_scope_state = {
						has_state_trait = state_trait_helmand_river
						is_incorporated = yes
					}
				}
				change_relations = {
					country = root
					value = -30
				}
				hidden_effect = {
					trigger_event = { id = persian_flavor.20 }
				}
			}
		}
	}
	option = {
		name = persian_flavor.17.b #Water rights must remain equal
		ig:ig_rural_folk = {
			add_modifier = {
				name = refused_irrigation_project
				months = 12
			}
		}
		if = {
			limit = {
				OR = {
					has_law = law_type:law_serfdom 
					has_law = law_type:law_tenant_farmers
				}
			}
			ig:ig_landowners = {
				add_modifier = {
					name = refused_irrigation_project
					months = 12
				}
			}
		}
		if = {
			limit = {
				has_law = law_type:law_commercialized_agriculture 
			}
			ig:ig_industrialists = {
				add_modifier = {
					name = refused_irrigation_project
					months = 12
				}
			}
		}
		if = {
			limit = {
				has_law = law_type:law_collectivized_agriculture 
			}
			ig:ig_trade_unions = {
				add_modifier = {
					name = refused_irrigation_project
					months = 12
				}
			}
		}
	}
}

# Amu Darya River Conflict
persian_flavor.18 = {
	type = country_event
	placement = scope:conflict_state
	title = persian_flavor.18.t
	desc = persian_flavor.18.d
	flavor = persian_flavor.18.f

	duration = 3

	event_image = {
		video = "asia_dead_cattle_poor_harvest"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_agriculture.dds"
	
	trigger = {
		has_technology_researched = mechanical_tools
		NOT = { has_variable = amu_darya_conflict }
		any_scope_state = {
			is_incorporated = yes
			any_scope_building = {
				count >= 3
				OR = {
					is_building_group = bg_agriculture
					is_building_group = bg_plantations
				}
				level >= 10
			}
			OR = {
				has_state_trait = state_trait_oxus_river
				any_neighbouring_state = {
					has_state_trait = state_trait_oxus_river
				}
			}
		}
		OR = {
			any_scope_state = {
				has_state_trait = state_trait_oxus_river
				NOT = { is_homeland_of_country_cultures = root }
			}
			any_country = {
				NOR = {
					root = this
					is_country_type = decentralized
				}
				any_scope_state = {
					has_state_trait = state_trait_oxus_river
					is_incorporated = yes
				}
			}
		}
	}
	
	immediate = {
		set_variable = amu_darya_conflict
		random_scope_state = {
			limit = {
				is_incorporated = yes
				any_scope_building = {
					count >= 3
					OR = {
						is_building_group = bg_agriculture
						is_building_group = bg_plantations
					}
					level >= 10
				}
				OR = {
					has_state_trait = state_trait_oxus_river
					any_neighbouring_state = {
						has_state_trait = state_trait_oxus_river
					}
				}
			}
			save_scope_as = conflict_state
		}
	}
	
	option = {
		name = persian_flavor.18.a #Demand more water
		default_option = yes
		every_scope_state = {
			limit = {
				is_incorporated = yes
				any_scope_building = {
					count >= 3
					OR = {
						is_building_group = bg_agriculture
						is_building_group = bg_plantations
					}
					level >= 10
				}
				OR = {
					has_state_trait = state_trait_oxus_river
					any_neighbouring_state = {
						has_state_trait = state_trait_oxus_river
					}
				}
			}
			add_modifier = {
				name = amu_darya_irrigation
				months = -1
			}
		}
		if = {
			limit = {
				any_scope_state = {
					has_state_trait = state_trait_oxus_river
					NOT = { is_homeland_of_country_cultures = root }
					NOT = { scope:conflict_state = this }
				}
			}
			every_scope_state = {
				limit = {
					NOT = { is_homeland_of_country_cultures = root }
					NOT = { scope:conflict_state = this }
					has_state_trait = state_trait_oxus_river
				}
				add_modifier = {
					name = river_water_diverted
					months = -1
				}
				add_radicals_in_state = {
					value = large_radicals
				}
			}
		}
		if = {
			limit = {
				any_country = {
					NOR = {
						root = this
						is_country_type = decentralized
					}
					any_scope_state = {
						has_state_trait = state_trait_oxus_river
						is_incorporated = yes
					}
				}
			}
			every_country = {
				limit = {
					NOR = {
						root = this
						is_country_type = decentralized
					}
					any_scope_state = {
						has_state_trait = state_trait_oxus_river
						is_incorporated = yes
					}
				}
				change_relations = {
					country = root
					value = -30
				}
				hidden_effect = {
					trigger_event = { id = persian_flavor.20 }
				}
			}
		}
	}
	option = {
		name = persian_flavor.18.b #Water rights must remain equal
		ig:ig_rural_folk = {
			add_modifier = {
				name = refused_irrigation_project
				months = 12
			}
		}
		if = {
			limit = {
				OR = {
					has_law = law_type:law_serfdom 
					has_law = law_type:law_tenant_farmers
				}
			}
			ig:ig_landowners = {
				add_modifier = {
					name = refused_irrigation_project
					months = 12
				}
			}
		}
		if = {
			limit = {
				has_law = law_type:law_commercialized_agriculture 
			}
			ig:ig_industrialists = {
				add_modifier = {
					name = refused_irrigation_project
					months = 12
				}
			}
		}
		if = {
			limit = {
				has_law = law_type:law_collectivized_agriculture 
			}
			ig:ig_trade_unions = {
				add_modifier = {
					name = refused_irrigation_project
					months = 12
				}
			}
		}
	}
}

# Zayanderud Water Supply
persian_flavor.19 = {
	type = country_event
	placement = scope:isfahan_scope
	title = persian_flavor.19.t
	desc = persian_flavor.19.d
	flavor = persian_flavor.19.f

	duration = 3

	event_image = {
		video = "unspecific_gears_pistons"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	trigger = {
		c:PER ?= this
		ig:ig_industrialists = {
			is_in_government = yes
			is_marginal = no
		}
		any_scope_state = {
			state_region = s:STATE_ISFAHAN
			any_scope_building = {
				OR = {
					is_building_group = bg_heavy_industry
					is_building_group = bg_power
					is_building_group = bg_oil_extraction
				}
				level >= 10
			}
		}
		NOT = { has_variable = zayanderud_water_event }
	}
	
	immediate = {
		set_variable = zayanderud_water_event
		random_scope_state = {
			limit = {
				state_region = s:STATE_ISFAHAN
			}
			save_scope_as = isfahan_scope
		}
		ig:ig_industrialists = {
			save_scope_as = industrialists_scope
		}
	}
	
	option = {
		name = persian_flavor.19.a
		default_option = yes
		
		scope:isfahan_scope = {
			every_scope_building = {
				limit = {
					OR = {
						is_building_group = bg_heavy_industry
						is_building_group = bg_power
						is_building_group = bg_oil_extraction
					}
					level >= 10
				}
				add_modifier = {
					name = increased_water_supply
					months = -1
				}
			}
			add_modifier = {
				name = reduced_water_resources
				months = -1
			}
			add_radicals_in_state = {
				value = medium_radicals
				strata = poor
			}
			add_radicals_in_state = {
				value = medium_radicals
				strata = middle
			}
		}
		
		scope:industrialists_scope = {
			add_modifier = {
				name = extra_water_resources
				months = 12
			}
		}
	}
	option = {
		name = persian_flavor.19.b
		scope:industrialists_scope = {
			add_modifier = {
				name = refused_water_resources
				months = 12
			}
		}
	}
}

# Response to Water Conflict
persian_flavor.20 = {
	type = country_event
	placement = root
	title = persian_flavor.20.t
	desc = persian_flavor.20.d
	flavor = persian_flavor.20.f

	duration = 3

	event_image = {
		video = "asia_dead_cattle_poor_harvest"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_map.dds"
	
	immediate = {
		if = {
			limit = {
				any_scope_state = {
					has_state_trait = state_trait_helmand_river
				}
			}
			random_country = {
				limit = {
					any_scope_state = {
						has_modifier = helmand_river_irrigation
					}
				}
				save_scope_as = helmand_river_conflict_country
			}
		}
		else_if = {
			limit = {
				any_scope_state = {
					has_state_trait = state_trait_oxus_river
				}
			}
			random_country = {
				limit = {
					any_scope_state = {
						has_modifier = amu_darya_irrigation
					}
				}
				save_scope_as = amu_darya_conflict_country
			}
		}
	}
	
	option = {
		name = persian_flavor.20.a
		default_option = yes
		
		if = {
			limit = {
				any_scope_state = {
					has_state_trait = state_trait_helmand_river
				}
			}
			every_scope_state = {
				limit = {
					has_state_trait = state_trait_helmand_river
				}
				add_modifier = {
					name = river_water_diverted
					months = -1
				}
			}
		}
		else_if = {
			limit = {
				any_scope_state = {
					has_state_trait = state_trait_oxus_river
				}
			}
			every_scope_state = {
				limit = {
					has_state_trait = state_trait_oxus_river
				}
				add_modifier = {
					name = river_water_diverted
					months = -1
				}
			}
		}
	}
}

# End the Harem Institution?
persian_flavor.21 = {
	type = country_event
	placement = root
	title = persian_flavor.21.t
	desc = persian_flavor.21.d
	flavor = persian_flavor.21.f

	duration = 3

	gui_window = event_window_1char_tabloid

	left_icon = scope:mohammad_safavid_scope

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	trigger = {
		any_scope_character = {
			has_variable = is_mohammad_safavid
			is_heir = yes
			age >= 15
			NOT = { has_variable = is_married }
		}
		NOT = { has_variable = harem_scandal }
	}
	
	immediate = {
		set_variable = harem_scandal
		ig:ig_landowners = {
			save_scope_as = landowners_scope
		}
		random_scope_character = {
			limit = {
				has_variable = is_mohammad_safavid
				is_heir = yes
				age >= 15
				NOT = { has_variable = is_married }
			}
			save_scope_as = mohammad_safavid_scope
		}
	}
	
	option = {
		name = persian_flavor.21.a #Let the Crown Prince do as he pleases
		default_option = yes
		
		scope:landowners_scope = {
			add_modifier = {
				name = tolerated_the_prince
				months = normal_modifier_time
			}
		}
		add_modifier = {
			name = harem_institution_questioned
			months = long_modifier_time
		}
		scope:mohammad_safavid_scope = {
			add_modifier = {
				name = the_prince_radical_thoughts
				months = -1
			}
		}
	}
	option = {
		name = persian_flavor.21.b #What is he thinking? Get back to studying!
		scope:mohammad_safavid_scope = {
			add_modifier = {
				name = the_prince_radical_thoughts
				months = -1
			}
		}
	}
}

# The Báb's Execution
persian_flavor.22 = {
	type = country_event
	placement = scope:tabriz_scope
	title = persian_flavor.22.t
	desc = persian_flavor.22.d
	flavor = persian_flavor.22.f

	duration = 3

	event_image = {
		video = "votp_hostile_court"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	
	immediate = {
		random_scope_state = {
			limit = { state_region = s:STATE_TABRIZ }
			save_scope_as = tabriz_scope
		}
		random_scope_character = {
			limit = {
				has_template = per_bab_character_template
			}
			save_scope_as = bab_char_scope
		}
		ig:ig_devout = {
			save_scope_as = ulemma_scope
		}
		set_variable = bab_executed
	}
	
	option = {
		name = persian_flavor.22.a #RIP
		default_option = yes
		random_scope_character = {
			limit = {
				has_variable = bab
			}
			kill_character = yes
		}
		add_radicals = {
			religion = rel:bahai
			value = 1
		}
		scope:ulemma_scope = {
			add_modifier = {
				name = victory_over_bahai
				months = normal_modifier_time
			}
		}
	}
}

# Assassination Attempt on the Shah
persian_flavor.23 = {
	type = country_event
	placement = root
	title = persian_flavor.23.t
	desc = persian_flavor.23.d
	flavor = persian_flavor.23.f

	duration = 3

	event_image = {
		video = "southamerica_public_figure_assassination"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_revolt.dds"
	
	trigger = {
		c:PER ?= this
		has_variable = bab_executed
		NOT = { has_variable = babi_assassination_attempt }
		ruler = {
			NOT = { has_variable = is_mohammad_safavid } #Can't ruin reformation like this
		}
	}
	
	immediate = {
		ruler = { save_scope_as = shah_scope }
		set_variable = babi_assassination_attempt
	}
	
	option = {
		name = persian_flavor.23.a #"I will rule you differently if I survive!"
		default_option = yes
		random_list = {
			50 = {
				scope:shah_scope = {
					kill_character = yes
				}
				hidden_effect = {
					trigger_event = { id = persian_flavor.24 }
				}
			}
			50 = {
			}
		}
	}
}

# Death of the Shah
persian_flavor.24 = {
	type = country_event
	placement = root
	title = persian_flavor.24.t
	desc = persian_flavor.24.d
	flavor = persian_flavor.24.f

	duration = 3

	event_image = {
		video = "middleeast_courtroom_upheaval"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	minor_left_icon = scope:new_ruler_scope

	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	
	immediate = {
		set_variable = {
			name = shah_mourning 
			days = 180
		}
		ruler = {
			save_scope_as = new_ruler_scope
		}
	}
	
	option = {
		name = persian_flavor.24.a #Punish all the Bábís!
		default_option = yes
		set_variable = babi_assassination_attempt
		custom_tooltip = {
			text = babi_massacre_tt
			every_scope_state = {
				kill_population_percent_in_state = {
					percent = 0.25
					religion = rel:bahai
				}
			}
		}
		add_modifier = {
			name = babi_reign_of_terror
			months = normal_modifier_time
		}
		change_infamy = 10
	}
	option = {
		name = persian_flavor.24.b #We will not continue the cycle of blood
		every_interest_group = {
			limit = {
				is_in_government = yes
			}
			add_modifier = {
				name = heathens_unpunished
				months = normal_modifier_time
			}
		}
		scope:new_ruler_scope = {
			add_modifier = weak_ruler
			months = -1
		}
	}
}

# Baha'u'llah
persian_flavor.25 = {
	type = country_event
	placement = scope:tehran_state
	title = persian_flavor.25.t
	desc = persian_flavor.25.d
	flavor = persian_flavor.25.f

	duration = 3

	event_image = {
		video = "unspecific_ruler_speaking_to_people"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_religion.dds"
	
	minor_left_icon = scope:bahaullah_scope
	
	trigger = {
		c:PER ?= this
		NOT = { has_global_variable = bahaullah_var }
		has_modifier = babi_reign_of_terror
		any_scope_state = {
			state_region = s:STATE_IRAKAJEMI
		}
	}

	immediate = {
		set_global_variable = bahaullah_var
		create_character = {
			template = per_bahaullah_character_template
			on_created = {
				set_variable = bahaullah
			}
		}
		ruler = {
			save_scope_as = shah_scope
		}
		random_scope_character = {
			limit = {
				has_variable = bahaullah
			}
			save_scope_as = bahaullah_scope
		}
		random_scope_state = {
			limit = {
				state_region = s:STATE_IRAKAJEMI
			}
			save_scope_as = tehran_state
		}
		random_state = {
			limit = {
				state_region = s:STATE_DIYARBAKIR
			}
			save_scope_as = diyarbakir_state
		}
	}

	option = {
		name = persian_flavor.25.a #Exile him from Persia
		default_option = yes
		scope:bahaullah_scope = {
			exile_character_with_martyrdom = yes
			hidden_effect = {
				random_country = {
					limit = {
						any_scope_state = {
							state_region = s:STATE_DIYARBAKIR
						}
					}
					save_scope_as = diyarbakir_owner
				}
				transfer_character = scope:diyarbakir_owner
				#To be continued in Ottoman flavor...
			}
		}
	}
}

# Constitutional Reformation JE

# Debate Among the Ulemmas
persian_flavor.26 = {
	type = country_event
	placement = root
	title = persian_flavor.26.t
	desc = persian_flavor.26.d
	flavor = persian_flavor.26.f

	duration = 3

	event_image = {
		video = "unspecific_ruler_speaking_to_people"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	option = {
		name = persian_flavor.26.a
		default_option = yes
		
	}
	option = {
		name = persian_flavor.26.b
		
	}
}

# Reactionary Ulemma Agitator/Leader Speaks Against the Constitution
persian_flavor.26 = {
	type = country_event
	placement = root
	title = persian_flavor.27.t
	desc = persian_flavor.27.d
	flavor = persian_flavor.27.f

	duration = 3

	event_image = {
		video = "unspecific_ruler_speaking_to_people"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	option = {
		name = persian_flavor.27.a
		default_option = yes
		
	}
	option = {
		name = persian_flavor.27.b
		
	}
}

# Pro-Democracy Ulemmas Issues Fatwas Against Protests
persian_flavor.28 = {
	type = country_event
	placement = root
	title = persian_flavor.28.t
	desc = persian_flavor.28.d
	flavor = persian_flavor.28.f

	duration = 3

	event_image = {
		video = "unspecific_ruler_speaking_to_people"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	option = {
		name = persian_flavor.28.a
		default_option = yes
		
	}
	option = {
		name = persian_flavor.28.b
		
	}
}

# Anti-Democracy Ulemmas Issues Fatwas Against Reforms
persian_flavor.29 = {
	type = country_event
	placement = root
	title = persian_flavor.29.t
	desc = persian_flavor.29.d
	flavor = persian_flavor.29.f

	duration = 3

	event_image = {
		video = "unspecific_ruler_speaking_to_people"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	option = {
		name = persian_flavor.29.a
		default_option = yes
		
	}
	option = {
		name = persian_flavor.29.b
		
	}
}

# Rebellious Ulemma Executed
persian_flavor.30 = {
	type = country_event
	placement = root
	title = persian_flavor.30.t
	desc = persian_flavor.30.d
	flavor = persian_flavor.30.f

	duration = 3

	event_image = {
		video = "unspecific_ruler_speaking_to_people"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	option = {
		name = persian_flavor.30.a
		default_option = yes
		
	}
	option = {
		name = persian_flavor.30.b
		
	}
}

# New 'Foreign' Constitution Questioned
persian_flavor.31 = {
	type = country_event
	placement = root
	title = persian_flavor.31.t
	desc = persian_flavor.31.d
	flavor = persian_flavor.31.f

	duration = 3

	event_image = {
		video = "unspecific_ruler_speaking_to_people"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	option = {
		name = persian_flavor.31.a
		default_option = yes
		
	}
	option = {
		name = persian_flavor.31.b
		
	}
}

# Kashf-e Hijab
persian_flavor.32 = {
	type = country_event
	placement = root
	title = persian_flavor.32.t
	desc = persian_flavor.32.d
	flavor = persian_flavor.32.f

	duration = 3

	event_image = {
		video = "europenorthamerica_sufferage"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	immediate = {
		if = {
			limit = {
				NOT = { country_has_state_religion = rel:atheist }
			}
			religion = {
				save_scope_as = state_religion
			}
		}
	}
	
	option = {
		name = persian_flavor.32.a #Women has the right to wear whatever they want
		default_option = yes
		ig:ig_devout = {
			add_modifier = {
				name = unveiled_women_devout
				months = -1
			}
		}
		ig:ig_intelligentsia = {
			add_modifier = {
				name = unveiled_women_intelligentsia
				months = normal_modifier_time
			}
		}
		if = {
			limit = {
				NOT = { country_has_state_religion = rel:atheist }
			}
			add_radicals = {
				religion = scope:state_religion
				value = medium_radicals
			}
		}
		add_radicals = {
			pop_type = clergymen
			value = medium_radicals
		}
	}
	option = {
		name = persian_flavor.32.b #Place a full ban on veiling
		ig:ig_devout = {
			add_modifier = {
				name = banned_veils
				months = -1
			}
		}
		ig:ig_intelligentsia = {
			add_modifier = {
				name = unveiled_women_intelligentsia
				months = normal_modifier_time
			}
		}
		if = {
			limit = {
				NOT = { country_has_state_religion = rel:atheist }
			}
			add_radicals = {
				religion = scope:state_religion
				value = large_radicals
			}
		}
		add_radicals = {
			pop_type = clergymen
			value = large_radicals
		}
	}
}

# Persian Renaissance
persian_renaissance.1 = { #Founding of the Academy of Iran
	type = country_event
	title = persian_renaissance.1.t
	desc = persian_renaissance.1.d
	flavor =  persian_renaissance.1.f
	duration = 3
	event_image = {
		video = "middleeast_engineer_blueprint"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_academia.dds"
	
	trigger = {
		#triggered by JE
	}
	option = { #
		name = persian_renaissance.1.a
		default_option = yes
		ig:ig_intelligentsia = {
			add_modifier = {
				name = academy_of_iran_modifier
				months = normal_modifier_time
			}
		}
	}
}

persian_renaissance.2 = { #National Museum of Iran
	type = country_event
	title = persian_renaissance.2.t
	desc = persian_renaissance.2.d
	flavor =  persian_renaissance.2.f
	duration = 3
	event_image = {
		texture = "gfx/event_pictures/iran_museum.dds"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	trigger = {
		#triggered by JE
	}
	option = { #
		name = persian_renaissance.2.a
		default_option = yes
		add_modifier = {
			name = national_museum_modifier
			months = normal_modifier_time
		}
	}
}

persian_renaissance.3 = { #Ctesiphon
	type = country_event
	title = persian_renaissance.3.t
	desc = persian_renaissance.3.d
	flavor =  persian_renaissance.3.f
	duration = 3
	event_image = {
		texture = "gfx/event_pictures/ctesiphon.dds"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	trigger = {
		#triggered by JE
	}
	
	immediate = {
		set_global_variable = ctesiphon_finished
	}
	
	option = {
		name = persian_renaissance.3.a
		default_option = yes
	}
}

persian_renaissance.4 = { #Susa
	type = country_event
	title = persian_renaissance.4.t
	desc = persian_renaissance.4.d
	flavor =  persian_renaissance.4.f
	duration = 3
	event_image = {
		texture = "gfx/event_pictures/susa.dds"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	trigger = {
		#triggered by JE
	}
	
	immediate = {
		set_global_variable = susa_finished
	}
	
	option = {
		name = persian_renaissance.4.a
		default_option = yes
	}
}

persian_renaissance.5 = { #Persepolis
	type = country_event
	title = persian_renaissance.5.t
	desc = persian_renaissance.5.d
	flavor =  persian_renaissance.5.f
	duration = 3
	event_image = {
		texture = "gfx/event_pictures/persepolis.dds"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	trigger = {
		#triggered by JE
	}
	
	immediate = {
		set_global_variable = persepolis_finished
	}
	
	option = {
		name = persian_renaissance.5.a
		default_option = yes
	}
}

persian_renaissance.6 = { #Fire Temple of Yazd
	type = country_event
	title = persian_renaissance.6.t
	desc = persian_renaissance.6.d
	flavor =  persian_renaissance.6.f
	duration = 3
	event_image = {
		texture = "gfx/event_pictures/atesh_beram.dds"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	trigger = {
		#triggered by JE
	}
	
	immediate = {
		set_global_variable = fire_temple_finished
	}
	
	option = {
		name = persian_renaissance.6.a
		default_option = yes
	}
}

#persian_renaissance.7 = { #Persian Nationalism (make this more impactful->leads to Iranian identity JE)
#	type = country_event
#	title = persian_renaissance.7.t
#	desc = persian_renaissance.7.d
#	flavor =  persian_renaissance.7.f
#	duration = 3
#	event_image = {
#		video = "asia_hinduism_sikhism"
#	}
#
#	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
#	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
#	
#	trigger = {
#	}
#	
#	immediate = {
#		#set_variable = iranian_identity
#	}
#	
#	option = { #Adopt a secular identity
#		name = persian_renaissance.7.a
#		default_option = yes
#		add_modifier = {
#			name = modifier_secularization_support
#			months = long_modifier_time
#		}
#		
#		ai_chance = {
#			base = 75
#		}
#	}
#	
#	option = { #A country must be based on divine guidance
#		name = persian_renaissance.7.b
#		add_loyalists = {
#			religion = rel:shiite
#			value = large_radicals
#		}
#		add_modifier = {
#			name = modifier_no_secularization_support
#			months = long_modifier_time
#		}
#		
#		ai_chance = {
#			base = 25
#		}
#	}
#}

persian_renaissance.8 = { #The Remodeling of Isfahan
	type = country_event
	placement = scope:isfahan_state
	title = persian_renaissance.8.t
	desc = persian_renaissance.8.d
	flavor =  persian_renaissance.8.f
	duration = 3
	event_image = {
		video = "unspecific_world_fair"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	immediate = {
		random_scope_state = {
			limit = {
				state_region = s:STATE_ISFAHAN
			}
			save_scope_as = isfahan_state
		}
	}
	
	option = { #
		name = persian_renaissance.8.a
		default_option = yes
		scope:isfahan_state = {
			add_modifier = {
				name = modifier_isfahan_renewal
				months = 12
			}
		}
		ig:ig_landowners = {
			add_modifier = {
				name = modifier_isfahan_positive
				months = 12
			}
		}
		ig:ig_intelligentsia = {
			add_modifier = {
				name = modifier_isfahan_positive
				months = 12
			}
		}
		ig:ig_rural_folk = {
			add_modifier = {
				name = modifier_isfahan_negative
				months = 12
			}
		}
		ig:ig_petty_bourgeoisie = {
			add_modifier = {
				name = modifier_isfahan_negative
				months = 12
			}
		}
	}
}

persian_renaissance.9 = { #A New Schooling System/Dar ul-Funun
	type = country_event
	placement = root
	title = persian_renaissance.9.t
	desc = persian_renaissance.9.d
	flavor =  persian_renaissance.9.f
	duration = 3
	event_image = {
		video = "middleeast_engineer_blueprint"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	immediate = {
		
	}
	
	option = { #
		name = persian_renaissance.9.a
		default_option = yes
		
	}
	
	option = { #
		name = persian_renaissance.9.b
		
	}
}

persian_renaissance.10 = { #The Silk Markets of Persia
	type = country_event
	placement = root
	title = persian_renaissance.10.t
	desc = persian_renaissance.10.d
	flavor =  persian_renaissance.10.f
	duration = 3
	event_image = {
		video = "asia_hinduism_sikhism"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	immediate = {
		
	}
	
	option = { #
		name = persian_renaissance.10.a
		default_option = yes
		
	}
	
	option = { #
		name = persian_renaissance.10.b
		
	}
}

#Karakum Frontier events
#The ancient city of Merv, previously fading into obscurity ever since its sacking by the Mongols, has experienced some revitalization as a developing industrial center in [ROOT.GetCountry.GetName]. However, it is lacking in manpower if we wish to turn it into an industrial city, and local governors suggest incorporating the Turkmen nomads into farms and factories.