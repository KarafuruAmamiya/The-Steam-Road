je_hindustani_uprising = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	group = je_group_tsr_content
	
	immediate = {
		trigger_event = { id = raj.6 days = 0 }
	}

	complete = {
		NOT = { exists = c:GUJ }
		any_scope_state = {
			count = all
			state_is_in_india = yes
			turmoil < 0.3
		}
		custom_tooltip = {
			text = no_independent_indian_subject_tt
			OR = {
				any_country = {
					count = all
					has_variable = hindustani_subject
					is_subject_of = root
				}
				any_state = {
					count = all
					has_variable = hindustani_subject_state
					owner = root
				}
			}
		}
		owns_entire_state_region = STATE_GUJARAT
		owns_entire_state_region = STATE_SAURASHTRA
		is_at_war = no
	}

	on_complete = {
		trigger_event = { id = raj.1 days = 0 popup = yes }
		add_modifier = {
			name = company_crushed_mutiny
			months = normal_modifier_time
		}
	}
	
	fail = {
		OR = {
			NAND = {
				owns_entire_state_region = STATE_GUJARAT
				owns_entire_state_region = STATE_SAURASHTRA
			}
			custom_tooltip = {
				text = independent_indian_subject_tt
				OR = {
					any_country = {
						has_variable = hindustani_subject
						NOT = { is_subject_of = root }
					}
					any_state = {
						has_variable = hindustani_subject_state
						NOT = { owner = root }
					}
				}
			}
		}
		is_at_war = no
	}
	
	on_fail = {
		trigger_event = { id = raj.7 days = 0 popup = yes }
		set_variable = failed_hindustani_uprising
	}

	weight = 100
	should_be_pinned_by_default = yes
}

je_surat_riots = {
	icon = "gfx/interface/icons/event_icons/event_revolt.dds"
	group = je_group_tsr_content
	
	is_shown_when_inactive = {
        exists = c:PER
        THIS = c:PER
		owns_entire_state_region = STATE_GUJARAT
		has_technology_researched = nationalism
    }
	
    possible = {
		OR = {
			has_journal_entry = je_springtime_of_the_peoples
			has_journal_entry = je_eclipse_of_persia
			has_journal_entry = je_zandi_rebellion
			has_modifier = opium_wars_lost
			has_law = law_type:law_commercialized_agriculture
			tax_level = high
			any_subject_or_below = {
				country_is_in_india = yes
				any_primary_culture = {
					has_discrimination_trait = south_asian_heritage
				}
				has_technology_researched = nationalism
			}
		}
		NOT = { has_law = law_type:law_slavery_banned }
    }
	
	immediate = {
		set_variable = {
			name = surat_riots_var
			value = 0
		}
		trigger_event = { id = indian_flavor.3 days = 0 }
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		has_law = law_type:law_slavery_banned
	}

	on_complete = {
		trigger_event = { id = indian_flavor.4 days = 0 }
	}
	
	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					any_scope_state = {
						state_region = s:STATE_GUJARAT
						turmoil < 0.15
					}
					any_scope_state = {
						state_region = s:STATE_SAURASHTRA
						turmoil < 0.15
					}
					cu:gujarati = {
						culture_secession_progress = {
							target = ROOT
							value < 0.25
						}
					}
				}
				change_variable = {
					name = surat_riots_var
					add = 1
				}
			}
		}
		random_events = {
			100 = 0
			10 = indian_flavor.5 #Peasants attack
			10 = indian_flavor.6 #Ports boycotted
			10 = indian_flavor.7 #Attempts on restoring order
		}
	}
	
	fail = {
		OR = {
			any_scope_state = {
				state_region = s:STATE_GUJARAT
				OR = {
					turmoil >= 0.5
					radical_fraction = {
						value >= 0.25
					}
				}
			}
			any_scope_state = {
				state_region = s:STATE_SAURASHTRA
				OR = {
					turmoil >= 0.5
					radical_fraction = {
						value >= 0.25
					}
				}
			}
			cu:gujarati = {
				culture_secession_progress = {
					target = ROOT
					value > 0.9
				}
			}
		}
	}
	
	on_fail = {
		trigger_event = { id = raj.6 days = 0 }
	}

	current_value = {
		value = var:surat_riots_var
	}

	goal_add_value = {
		add = 60
	}

	invalid = {
		NOT = {
			owns_entire_state_region = STATE_GUJARAT
		}
	}

	transferable = no

	weight = 5000
	
	progressbar = yes
	should_be_pinned_by_default = yes
}