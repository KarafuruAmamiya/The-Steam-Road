namespace = krl_independence

# War criticsm in the US
krl_independence.1 = {
	type = country_event
	placement = ROOT

	title = krl_independence.1.t
	desc = krl_independence.1.d
	flavor = krl_independence.1.f

	event_image = {
		video = "gfx/event_pictures/unspecific_politicians_arguing.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/asia/politician_parliament_motion"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	duration = 3

	trigger = {
		has_variable = karolean_independence_war
		exists = c:USC
		this = c:USC
	}

	option = { # We will do what we can
		name = krl_independence.1.a
		random_diplomatic_play = {
			limit = { 
				initiator_is = c:SCA
				target_is = c:KRL
			}
			war = {
				add_war_war_support = {
					target = c:USC
					value = -50
				}
			}
		}
	}
}

# The people demand the end of the war
krl_independence.2 = {
	type = country_event
	placement = ROOT

	title = krl_independence.2.t
	desc = krl_independence.2.d
	flavor = krl_independence.2.f

	event_image = {
		video = "gfx/event_pictures/unspecific_politicians_arguing.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/politicians_arguing"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	trigger = {
		has_variable = karolean_independence_war
		exists = c:USC
		this = c:USC
		any_diplomatic_play = {
			initiator_is = c:SCA
			target_is = c:KRL
			war = {
				has_war_support = {
					target = c:USC
					value < 0
				}
			}
		}
	}

	option = { # We must support our allies
		name = krl_independence.2.a
		change_relations = {
			country = c:SCA
			value = 50
		}
		ig:ig_armed_forces = {
			add_modifier = {
				name = did_not_pull_out_of_the_war_positive
				months = normal_modifier_time
			}
		}
		ig:ig_intelligentsia = {
			add_modifier = {
				name = did_not_pull_out_of_the_war_negative
				months = normal_modifier_time
			}
		}
		ig:ig_devout = {
			add_modifier = {
				name = did_not_pull_out_of_the_war_negative
				months = normal_modifier_time
			}
		}
		ai_chance = {
			base = 25
		}
	}

	option = { # The people has spoken
		name = krl_independence.2.b
		default_option = yes
		ai_chance = {
			base = 75
		}
		hidden_effect = {
			random_diplomatic_play = {
				limit = { 
					initiator_is = c:SCA
					target_is = c:KRL
				}
				war = {
					add_war_war_support = {
						target = c:USC
						value = -100
					}
				}
			}
		}
		custom_tooltip = krl_independence.2.tt
		ig:ig_intelligentsia = {
			add_modifier = {
				name = pulled_out_of_the_war_positive
				months = normal_modifier_time
			}
		}
		ig:ig_devout = {
			add_modifier = {
				name = pulled_out_of_the_war_positive
				months = normal_modifier_time
			}
		}
		ig:ig_armed_forces = {
			add_modifier = {
				name = pulled_out_of_the_war_negative
				months = normal_modifier_time
			}
		}
		remove_variable = karolean_independence_war
	}
}

# Karolia wins
krl_independence.3 = {
	type = country_event
	placement = ROOT

	title = krl_independence.3.t
	desc = krl_independence.3.d
	flavor = krl_independence.3.f

	event_image = {
		video = "gfx/event_pictures/unspecific_military_parade.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/military_parade"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	trigger = {
		has_variable = karolean_independence_war
		exists = c:KRL
		this = c:KRL
		is_at_war = no
		NOT = { is_subject_of = c:SCA }
	}

	option = { # The fallen heroes shall never be forgotten!
		name = krl_independence.3.a
		remove_variable = karolean_independence_war
		remove_modifier = karolean_independence_war
	}
}

# Start event for Karolia
krl_independence.4 = {
	type = country_event
	placement = ROOT

	title = krl_independence.4.t
	desc = krl_independence.4.d
	flavor = krl_independence.4.f

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_political_extremism.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/political_extremism"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	duration = 3

	trigger = {
		has_variable = karolean_independence_war
		exists = c:KRL
		this = c:KRL
	}

	option = {
		name = krl_independence.4.a
		add_modifier = {
			name = karolean_independence_war
			months = normal_modifier_time
		}
	}
}

# Scandinavia Angry
krl_independence.5 = {
	type = country_event
	placement = ROOT

	title = krl_independence.5.t
	desc = krl_independence.5.d
	flavor = krl_independence.5.f

	gui_window = event_window_1char_tabloid

	left_icon = scope:winston_rodney

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	duration = 3
	
	immediate = {
		c:USC = {
			ruler = {
				save_scope_as = winston_rodney
			}
		}
	}

	trigger = {
		has_variable = karolean_independence_war
		exists = c:SCA
		this = c:SCA
		has_diplomatic_pact = {
			who = c:USC
			type = defensive_pact
		}
		any_diplomatic_play = {
			initiator_is = c:SCA
			target_is = c:KRL
			war = {
				NOT = {
					is_war_participant = c:USC
				}
			}
		}
	}

	option = {
		name = krl_independence.5.a
		change_relations = {
			country = c:USC
			value = -100
		}
		hidden_effect = {
			set_secret_goal = {
				country = c:USC
				secret_goal = antagonize
			}
		}
		remove_diplomatic_pact = {
			country = c:USC
			type = defensive_pact
		}
		remove_variable = karolean_independence_war
	}
}

# Start event for Scandinavia
krl_independence.6 = {
	type = country_event
	placement = ROOT

	title = krl_independence.6.t
	desc = krl_independence.6.d
	flavor = krl_independence.6.f

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_springtime_of_nations.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/springtime_of_nations"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	duration = 3

	trigger = {
		has_variable = karolean_independence_war
		exists = c:SCA
		this = c:SCA
	}

	option = {
		name = krl_independence.6.a
	}
}

# Karolia loses
krl_independence.7 = {
	type = country_event
	placement = ROOT

	title = krl_independence.7.t
	desc = krl_independence.7.d
	flavor = krl_independence.7.f

	event_image = {
		video = "gfx/event_pictures/unspecific_devastation.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/devastation"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	duration = 3

	trigger = {
		has_variable = karolean_independence_war
		exists = c:KRL
		this = c:KRL
		is_at_war = no
		is_subject_of = c:SCA
	}

	option = {
		name = krl_independence.7.a #This is not over yet!
		ruler = {
			kill_character = yes
		}
		random_scope_character = {
			limit = {
				has_variable = vice_president_trigger
			}
			kill_character = yes
		}
		create_character = {
			culture = cu:swedish
			ruler = yes
		}
		every_scope_state = {
            add_radicals = {
                value = very_large_radicals
                culture = cu:vinlandish
            }
            add_radicals = {
                value = very_large_radicals
                culture = cu:kanadian
            }
        }
		remove_variable = karolean_independence_war
		remove_modifier = karolean_independence_war
	}
}

# Karolia loses (Scandinavia)
krl_independence.8 = {
	type = country_event
	placement = ROOT

	title = krl_independence.8.t
	desc = krl_independence.8.d
	flavor = krl_independence.8.f

	event_image = {
		video = "gfx/event_pictures/unspecific_military_parade.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/military_parade"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	duration = 3

	trigger = {
		has_variable = karolean_independence_war
		exists = c:SCA
		this = c:SCA
		is_at_war = no
		c:KRL = { is_subject_of = c:SCA }
	}

	option = {
		name = krl_independence.8.a #They shall not dare to defy us again!
		c:KRL = { change_subject_type = subject_type_dependency }
	}
}