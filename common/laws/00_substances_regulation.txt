# group = this is the law_group a law belongs to
# icon = graphical icon shown in-game
# modifier = {} modifier on country for having adopted this law

law_no_substances_regulation = {
	group = lawgroup_substances_regulation
	
	icon = "gfx/interface/icons/law_icons/mercantilism.dds"
	
	progressiveness = 0
	
	possible_political_movements = {
		law_restricted_substances_use
		law_substances_banned
	}
	
	on_enact = {
		if = {
			limit = {
				is_banning_goods = g:opium
			}
			remove_banned_goods = g:opium
			remove_modifier = opium_ban_authority
		}
		if = {
			limit = {
				is_banning_goods = g:liquor
			}
			remove_banned_goods = g:liquor
			remove_modifier = liqour_ban_authority
		}
	}

	pop_support = {
		value = 0
		#We can make whatever we want, thank you
		add = {
			desc = "POP_FARMERS"			
			if = {
				limit = {
					is_pop_type = farmers
				}
				value = 0.25
			}
		}
		add = {
			desc = "POP_PEASANTS"			
			if = {
				limit = {
					is_pop_type = peasants
				}
				value = 0.25
			}
		}
		add = {
			desc = "POP_ARISTOCRATS"			
			if = {
				limit = {
					is_pop_type = aristocrats
				}
				value = 0.25
			}
		}
		#If the masses wants it, we will make it
		add = {
			desc = "POP_CAPITALISTS"
			if = {
				limit = {
					is_pop_type = capitalists
				}
			}
			value = 0.25
		}
	}
	
	ai_will_do = {
	}

	ai_enact_weight_modifier = { #Petitions
		value = 0
		
		if = {
			limit = {
				law_is_important = yes
			}
			add = 750
		}
		
		if = {
			limit = { 
				has_journal_entry = je_government_petition
				has_variable = desired_law_var
                scope:law = var:desired_law_var
			}
			add = 750
		}
	}
}

law_restricted_substances_use = {
	group = lawgroup_substances_regulation
	
	icon = "gfx/interface/icons/law_icons/serfdom.dds"
	
	progressiveness = 50
	
	disallowing_laws = {
		law_no_health_system
		law_theocracy
	}

	unlocking_technologies = {
		pharmaceuticals 
		psychiatry
	}
	
	modifier = {
		#need to reduce pop demand/lower obsession chance
		state_mortality_mult = -0.005
		state_turmoil_effects_mult = -0.05
	}
	
	possible_political_movements = {
		law_regulated_substances_use
		law_no_substances_regulation
		law_substances_banned
	}

	pop_support = {
		value = 0
		add = {
			desc = "POP_ACADEMICS"			
			if = {
				limit = {
					is_pop_type = academics
				}
				value = 0.25
			}
		}
	} 

	ai_enact_weight_modifier = { #Petitions
		value = 0
		
		if = {
			limit = {
				law_is_important = yes
			}
			add = 750
		}
		
		if = {
			limit = { 
				has_journal_entry = je_government_petition
				has_variable = desired_law_var
                scope:law = var:desired_law_var
			}
			add = 750
		}
	}
}

law_regulated_substances_use = {
	group = lawgroup_substances_regulation
	
	icon = "gfx/interface/icons/law_icons/regulatory_bodies.dds"
	
	progressiveness = 100

	disallowing_laws = {
		law_no_health_system
		law_theocracy
	}

	unlocking_technologies = {
		human_rights
		psychoanalysis
	}
	
	modifier = {
		interest_group_ig_devout_pol_str_mult = -0.10
		state_mortality_mult = -0.0025
		state_turmoil_effects_mult = -0.025
		#need to reduce pop demand/lower obsession chance
	}
	
	possible_political_movements = {
		law_restricted_substances_use
		law_no_substances_regulation
		law_substances_banned
	}

	pop_support = {
		value = 0
		add = {
			desc = "POP_ACADEMICS"			
			if = {
				limit = {
					is_pop_type = academics
				}
				value = 0.25
			}
		}
	}
	
	ai_will_do = {
		exists = ruler
		ruler = { 
			has_ideology = ideology:ideology_humanitarian
		}
	}

	ai_enact_weight_modifier = { #Petitions
		value = 0
		
		if = {
			limit = {
				law_is_important = yes
			}
			add = 750
		}
		
		if = {
			limit = { 
				has_journal_entry = je_government_petition
				has_variable = desired_law_var
                scope:law = var:desired_law_var
			}
			add = 750
		}
	}
}

law_substances_banned = {
	group = lawgroup_substances_regulation
	
	icon = "gfx/interface/icons/law_icons/serfdom_banned.dds"
	
	progressiveness = -25

	disallowing_laws = {
		law_anarchy
		law_no_police
	}

	unlocking_technologies = {
		law_enforcement
	}
	
	modifier = {
		interest_group_ig_devout_pol_str_mult = 0.10
		country_authority_add = 100
	}
	
	possible_political_movements = {
		law_restricted_substances_use
		law_no_substances_regulation
	}

	pop_support = {
		value = 0
		#Drugs is haram
		add = {
			desc = "POP_DEVOUT"
			if = {
				limit = {
					is_pop_type = clergymen
				}
			}
			value = 0.25
		}
		
		#Urban pops if addiction is rampant
		add = {
			desc = "URBAN_POP"
			if = {
				limit = {
					owner = {
						any_primary_culture = {
							OR = {
								has_cultural_obsession = liquor
								has_cultural_obsession = opium
							}
						}
					}
					NOR = {
						is_pop_type = aristocrats
						is_pop_type = academics
						is_pop_type = capitalists
						pop_employment_building_group = bg_agriculture
						pop_employment_building_group = bg_ranching
						pop_employment_building_group = bg_plantations
					}
				}
				value = 0.25
			}
		}
	}
	
	ai_will_do = {
		OR = {
			has_journal_entry = je_prohibition
			has_journal_entry = je_opium_obsession
			AND = {
				exists = ruler
				ruler = { 
					has_ideology = ideology:ideology_theocrat 
				}
			}
		}
	}

	ai_enact_weight_modifier = { #Petitions
		value = 0
		
		if = {
			limit = {
				law_is_important = yes
			}
			add = 750
		}
		
		if = {
			limit = { 
				has_journal_entry = je_government_petition
				has_variable = desired_law_var
                scope:law = var:desired_law_var
			}
			add = 750
		}
		
		if = {
			limit = { 
				OR = {
					has_journal_entry = je_prohibition
					has_journal_entry = je_opium_obsession
				}
			}
			add = 1000
		}
	}
}
