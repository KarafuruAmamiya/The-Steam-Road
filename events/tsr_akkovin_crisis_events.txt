namespace = akkovin_crisis

# Start event
akkovin_crisis.1 = {
	type = country_event
	placement = root
	title = akkovin_crisis.1.t
	desc = akkovin_crisis.1.d
	flavor = akkovin_crisis.1.f

	duration = 3

	event_image = {
		video = "unspecific_factory_closed"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
	}

	immediate = {
		set_variable = {
			name = akc_reform_var
			value = 0
		}
		set_variable = {
			name = akc_kurdish_separatist_var
			value = 0
		}
		set_variable = {
			name = akc_dhimmi_separatist_var
			value = 0
		}
		set_variable = {
			name = akc_arab_separatist_var
			value = 0
		}
		add_journal_entry = {
			type = je_akkovin_crisis
		}
	}

	option = {
		name = akkovin_crisis.1.a
		add_journal_entry = {
			type = je_akkovin_reform_economy
		}
		add_journal_entry = {
			type = je_akkovin_reform_education
		}
		add_journal_entry = {
			type = je_akkovin_reform_army
		}
		add_journal_entry = {
			type = je_akkovin_reform_navy
		}
		add_journal_entry = {
			type = je_akkovin_reform_bureaucracy
		}
		add_journal_entry = {
			type = je_akkovin_reform_sovereignty
		}
		add_journal_entry = {
			type = je_akkovin_reform_kurdish
		}
		add_journal_entry = {
			type = je_akkovin_reform_arabia
		}
		add_journal_entry = {
			type = je_akkovin_reform_minorities
		}
		add_journal_entry = {
			type = je_akkovin_reform_nationalism
		}
	}
}

# Fail event
akkovin_crisis.2 = { # Collapse of the Akkovin Confederation
	type = country_event
	placement = root
	title = akkovin_crisis.2.t
	desc = akkovin_crisis.2.d
	flavor = akkovin_crisis.2.f
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	duration = 3

	event_image = {
		video = "unspecific_factory_closed"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
	}

	immediate = {
		set_variable = akkovin_fail
		if = {
			limit = { has_modifier = foreign_studies }
			remove_modifier = foreign_studies
		}
		if = {
			limit = {
				ig:ig_intelligentsia = {
					has_modifier = foreign_students
				}
			}
			ig:ig_intelligentsia = {
				remove_modifier = foreign_students
			}
		}
		if = {
			limit = {
				ig:ig_petty_bourgeoisie = {
					has_modifier = foreign_students
				}
			}
			ig:ig_petty_bourgeoisie = {
				remove_modifier = foreign_students
			}
		}
		if = {
			limit = {
				ig:ig_industrialists = {
					has_modifier = foreign_students
				}
			}
			ig:ig_industrialists = {
				remove_modifier = foreign_students
			}
		}
		ruler = {
			save_scope_as = akkovin_sultan
		}
	}
	
	option = {
		name = akkovin_crisis.2.a
		if = {
			limit = {
				any_subject_or_below = {
					OR = {
						country_is_in_europe = yes
						country_is_in_middle_east = yes
					}
				}
			}
			every_subject_or_below = {
				limit = {
					OR = {
						country_is_in_europe = yes
						country_is_in_middle_east = yes
					}
				}
				make_independent = yes
			}
		}
		if = {
			limit = {
				has_state_in_state_region = STATE_DONGOLA
				exists = c:BJA
			}
			s:STATE_DONGOLA.region_state:AKN = {
				set_state_owner = c:BJA
			}
		}
		else_if = {
			limit = {
				has_state_in_state_region = STATE_DONGOLA
				exists = c:ETH
				c:ETH = { has_state_in_state_region = STATE_DONGOLA }
			}
			s:STATE_DONGOLA.region_state:AKN = {
				set_state_owner = c:ETH
			}
		}
		else_if = {
			limit = {
				has_state_in_state_region = STATE_DONGOLA
				exists = c:EGY
			}
			s:STATE_DONGOLA.region_state:AKN = {
				set_state_owner = c:EGY
			}
		}
		else_if = {
			limit = {
				has_state_in_state_region = STATE_DONGOLA
				exists = c:FEA
			}
			s:STATE_DONGOLA.region_state:AKN = {
				set_state_owner = c:FEA
			}
		}
		else_if = {
			limit = {
				has_state_in_state_region = STATE_DONGOLA
				exists = c:FRA
			}
			s:STATE_DONGOLA.region_state:AKN = {
				set_state_owner = c:FRA
			}
		}
		if = {
			limit = {
				has_state_in_state_region = STATE_KUBAN
				exists = c:TTR
			}
			s:STATE_KUBAN.region_state:AKN = {
				set_state_owner = c:TTR
			}
		}
		else_if = {
			limit = {
				has_state_in_state_region = STATE_KUBAN
				exists = c:TUR
			}
			s:STATE_KUBAN.region_state:AKN = {
				set_state_owner = c:TUR
			}
		}
		set_country_type = unrecognized
		ruler = {
			kill_character = yes
		}
		if = {
			limit = {
				has_variable = akturkification_start
			}
			custom_tooltip = {
				text = akturkification_over_tt
				restore_akkovin_homelands = yes
				remove_modifier = russification_modifier
			}
		}
	}

}

# Crisis averted
akkovin_crisis.3 = {
	type = country_event
	placement = root
	title = akkovin_crisis.3.t
	desc = akkovin_crisis.3.d
	flavor = akkovin_crisis.3.f

	duration = 3

	event_image = {
		video = "europenorthamerica_london_center"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	trigger = {
	}

	immediate = {
		set_variable = akc_reforms_complete
		remove_modifier = akkovin_crisis
		remove_modifier = outmoded_bureaucracy
		remove_modifier = tribal_structures
		remove_modifier = foreign_studies
		ig:ig_intelligentsia = {
			remove_modifier = foreign_students
		}
		ig:ig_petty_bourgeoisie = {
			remove_modifier = foreign_students
		}
		ig:ig_industrialists = {
			remove_modifier = foreign_students
		}
		add_modifier = {
			name = akn_crisis_averted_country
			months = normal_modifier_time
		}
		every_interest_group = {
			limit = {
				NOT = { is_interest_group_type = ig_trade_unions }
			}
			add_modifier = {
				name = akn_crisis_averted_ig
				months = normal_modifier_time
			}
		}
		add_loyalists = {
			culture = cu:akturk
			value = 0.25
		}
	}

	option = {
		name = akkovin_crisis.3.a
		default_option = yes
		trigger = {
			has_variable = completed_sick_man_army_je
		}
		add_modifier = {
			name = akkovin_army_reform
			months = normal_modifier_time
		}
	}
	option = {
		name = akkovin_crisis.3.b
		trigger = {
			AND = {
				has_variable = completed_akkovin_reform_sovereignty_je
				has_variable = completed_akkovin_reform_arabia_je
			}
			NAND = {
				owns_entire_state_region = STATE_HARPUT
				owns_entire_state_region = STATE_SIVAS
				owns_entire_state_region = STATE_CYPRUS
				owns_entire_state_region = STATE_SHAHRIZOR
				owns_entire_state_region = STATE_KARS
				owns_entire_state_region = STATE_ARMENIA
			}
		}
		s:STATE_HARPUT = {
			add_claim = ROOT
		}
		s:STATE_SIVAS = {
			add_claim = ROOT
		}
		s:STATE_CYPRUS = {
			add_claim = ROOT
		}
		s:STATE_SHAHRIZOR = {
			add_claim = ROOT
		}
		s:STATE_KARS = {
			add_claim = ROOT
		}
		s:STATE_ARMENIA = {
			add_claim = ROOT
		}
	}
	option = {
		name = akkovin_crisis.3.c
		trigger = {
			has_variable = completed_akkovin_reform_economy_je
		}
		add_modifier = {
			name = akkovin_urbanization
			months = normal_modifier_time
		}
	}
	option = {
		name = akkovin_crisis.3.d
		trigger = {
			has_variable = completed_akkovin_reform_education_je
		}
		add_modifier = {
			name = akkovin_education
			months = normal_modifier_time
		}
	}
	option = {
		name = akkovin_crisis.3.e
		trigger = {
			has_variable = completed_akkovin_reform_bureaucracy_je
		}
		add_modifier = {
			name = akkovin_bureaucracy
			months = normal_modifier_time
		}
	}
}

# Fate of the Gunpowder Alliance (For Safavids)
akkovin_crisis.4 = {
	type = country_event
	placement = root
	title = akkovin_crisis.4.t
	desc = akkovin_crisis.4.d
	flavor = akkovin_crisis.4.f

	duration = 3

	event_image = {
		video = "middleeast_battlefield_trenches"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	immediate = {
		set_variable = pre_treaty
		c:AKN = { save_scope_as = akn_scope }
	}

	option = {
		name = akkovin_crisis.4.a
		c:AKN = {
			trigger_event = { id = akkovin_crisis.5 days = 3 }
		}
	}
}

# An Agreement with the Safavid Empire?
akkovin_crisis.5 = {
	type = country_event
	placement = root
	title = akkovin_crisis.5.t
	desc = akkovin_crisis.5.d
	flavor = akkovin_crisis.5.f

	duration = 3

	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_diplomacy.dds"

	trigger = {
	}

	immediate = {
	}

	option = {
		name = akkovin_crisis.5.a
		trigger_event = { id = akkovin_crisis.6 days = 7 }
		c:PER = { trigger_event = { id = akkovin_crisis.6 days = 7 } }
		add_modifier = {
			name = prestige_loss
			months = normal_modifier_time
		}
	}
}

# The Treaty of Baglar
akkovin_crisis.6 = {
	type = country_event
	placement = root
	title = akkovin_crisis.6.t
	desc = akkovin_crisis.6.d
	flavor = akkovin_crisis.6.f

	duration = 3

	event_image = {
		video = "unspecific_signed_contract"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_diplomacy.dds"

	immediate = {
		c:AKN = { save_scope_as = akn_scope }
		c:PER = { save_scope_as = per_scope }
		if = {
			limit = {
				any_market = {
					owner = ROOT
					any_trade_route = {
						goods = g:clothes
						importer.owner = ROOT
						exporter.owner = c:PER
					}
				}
			}
			random_market = {
				limit = {
					owner = ROOT
					any_trade_route = {
						goods = g:clothes
						importer.owner = ROOT
						exporter.owner = c:PER
					}
				}
				every_trade_route = {
					limit = {
						goods = g:clothes
						importer.owner = ROOT
						exporter.owner = c:PER
					}
					save_scope_as = clothes_route
				}
			}
		}
		if = {
			limit = {
				any_market = {
					owner = ROOT
					any_trade_route = {
						goods = g:furniture
						importer.owner = ROOT
						exporter.owner = c:PER
					}
				}
			}
			random_market = {
				limit = {
					owner = ROOT
					any_trade_route = {
						goods = g:furniture
						importer.owner = ROOT
						exporter.owner = c:PER
					}
				}
				every_trade_route = {
					limit = {
						goods = g:furniture
						importer.owner = ROOT
						exporter.owner = c:PER
					}
					save_scope_as = furniture_route
				}
			}
		}
	}

	option = {
		name = akkovin_crisis.6.a
		default_option = yes
		
		trigger = {
			c:AKN ?= ROOT
		}
		if = {
			limit = {
				exists = scope:clothes_route
			}
			scope:clothes_route = {
				lock_trade_route = {
					months = 120
				}
			}
		}
		if = {
			limit = {
				exists = scope:furniture_route
			}
			scope:furniture_route = {
				lock_trade_route = {
					months = 120
				}
			}
		}
		add_modifier = {
			name = treaty_of_baglar
			months = 120
		}
		custom_tooltip = treaty_of_baglar_tt
		set_variable = baglar_treaty_signed
		
		hidden_effect = {
			trigger_event = { id = akkovin_crisis.7 months = 120 }
			every_country = {
				limit = {
					OR = {
						has_interest_marker_in_region = region_arabic
						has_interest_marker_in_region = region_anatolia
						has_interest_marker_in_region = region_persia
					}
				}
				post_notification = akkovin_signed_treaty
			}
		}
	}
	
	option = {
		name = akkovin_crisis.6.b
		trigger = {
			c:PER ?= ROOT
		}
		create_diplomatic_pact = {
			country = c:AKN
			type = defensive_pact
		}
		custom_tooltip = treaty_of_baglar_tt
		set_variable = baglar_treaty_signed
	}
}

# Renewing the Treaty of Baglar
akkovin_crisis.7 = {
	type = country_event
	placement = root
	title = akkovin_crisis.7.t
	desc = akkovin_crisis.7.d
	flavor = akkovin_crisis.7.f

	duration = 3

	event_image = {
		video = "unspecific_signed_contract"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_diplomacy.dds"

	immediate = {
		c:AKN = { save_scope_as = akn_scope }
		c:PER = { save_scope_as = per_scope }
		if = {
			limit = {
				any_market = {
					owner = ROOT
					any_trade_route = {
						goods = g:clothes
						importer.owner = ROOT
						exporter.owner = c:PER
					}
				}
			}
			random_market = {
				limit = {
					owner = ROOT
					any_trade_route = {
						goods = g:clothes
						importer.owner = ROOT
						exporter.owner = c:PER
					}
				}
				every_trade_route = {
					limit = {
						goods = g:clothes
						importer.owner = ROOT
						exporter.owner = c:PER
					}
					save_scope_as = clothes_route
				}
			}
		}
		if = {
			limit = {
				any_market = {
					owner = ROOT
					any_trade_route = {
						goods = g:furniture
						importer.owner = ROOT
						exporter.owner = c:PER
					}
				}
			}
			random_market = {
				limit = {
					owner = ROOT
					any_trade_route = {
						goods = g:furniture
						importer.owner = ROOT
						exporter.owner = c:PER
					}
				}
				every_trade_route = {
					limit = {
						goods = g:furniture
						importer.owner = ROOT
						exporter.owner = c:PER
					}
					save_scope_as = furniture_route
				}
			}
		}
	}

	option = {
		name = akkovin_crisis.7.a
		if = {
			limit = {
				exists = scope:clothes_route
			}
			scope:clothes_route = {
				lock_trade_route = {
					months = -1
				}
			}
		}
		if = {
			limit = {
				exists = scope:furniture_route
			}
			scope:furniture_route = {
				lock_trade_route = {
					months = -1
				}
			}
		}
		add_modifier = {
			name = treaty_of_baglar_2
			months = -1
		}
		activate_law = law_type:law_free_trade
		activate_law = law_type:law_legacy_slavery
		
		every_subject_or_below = {
			activate_law = law_type:law_free_trade
			activate_law = law_type:law_legacy_slavery
		}
		
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						has_interest_marker_in_region = region_arabic
						has_interest_marker_in_region = region_anatolia
						has_interest_marker_in_region = region_persia
					}
				}
				post_notification = akkovin_renew_treaty
			}
		}
		
		ai_chance = {
			base = 25
		}
	}
	
	option = {
		name = akkovin_crisis.7.b
		default_option = yes
		change_relations = {
			country = c:PER
			value = -100
		}
		remove_diplomatic_pact = {
			country = c:PER
			type = trade_agreement
		}
		remove_diplomatic_pact = {
			country = c:PER
			type = defensive_pact
		}
		if = {
			limit = {
				any_country = {
					has_diplomatic_pact = { 
						who = root
						type = tob_embargo
					}
				}
			}
			every_country = {
				limit = {
					has_diplomatic_pact = { 
						who = root
						type = tob_embargo
					}
				}
				remove_diplomatic_pact = {
					country = root
					type = tob_embargo
				}
			}
		}
		if = {
			limit = {
				c:PER = {
					has_diplomatic_pact = { 
						who = root
						type = customs_union
					}
				}
			}
			remove_diplomatic_pact = {
				country = c:PER
				type = customs_union
			}
		}
		
		custom_tooltip = no_renewing_baglar_tt
		
		c:PER = { trigger_event = { id = treaty_of_baglar_events.1 days = 1 } }
		
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						has_interest_marker_in_region = region_arabic
						has_interest_marker_in_region = region_anatolia
						has_interest_marker_in_region = region_persia
					}
				}
				post_notification = akkovin_dont_renew_treaty
			}
		}
		
		ai_chance = {
			base = 75
		}
	}
}

# Kurdish Revolts
akkovin_crisis.8 = {
	type = country_event
	placement = root
	title = akkovin_crisis.8.t
	desc = akkovin_crisis.8.d
	flavor = akkovin_crisis.8.f

	duration = 3

	event_image = {
		video = "middleeast_courtroom_upheaval"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_revolt.dds"

	trigger = {
		NOT = {
			any_scope_state = {
				has_modifier = kurdish_autonomy
			}
		}
		OR = {
			has_law = law_type:law_racial_segregation
			has_law = law_type:law_national_supremacy
			has_law = law_type:law_ethnostate
		}
	}

	option = {
		name = akkovin_crisis.8.a
		default_option = yes
		remove_primary_culture = cu:kurdish
		add_radicals = {
			culture = cu:kurdish
			value = very_large_radicals
		}
		
		ai_chance = {
			base = 100
		}
	}
	
	option = {
		name = akkovin_crisis.8.b
		trigger_event = { id = akkovin_flavor.4 days = 0 }
		
		ai_chance = {
			base = 0
		}
	}
}

# Partition of the Akkovin Sultanate
akkovin_crisis.9 = {
	type = country_event
	placement = root
	title = akkovin_crisis.9.t
	desc = akkovin_crisis.9.d
	flavor = akkovin_crisis.9.f

	duration = 3

	event_image = {
		video = "unspecific_factory_closed"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
		NOT = { has_global_variable = akkovin_partition_start }
		OR = {
			AND = {
				exists = c:TUR
				c:TUR = ROOT
				is_ai = no
				is_at_war = no
			}
			AND = {
				exists = c:PER
				c:PER = ROOT
				is_ai = no
				is_at_war = no
			}
		}
		exists = c:AKN
		c:AKN = { 
			is_country_type = unrecognized
			any_scope_state = {
				is_incorporated = yes
				count < 9
			}
			NOR = {
				has_modifier = treaty_of_baglar
				has_modifier = treaty_of_baglar_2
			}
		}
	}

	immediate = {
		c:AKN = { save_scope_as = akn_scope }
		set_global_variable = akkovin_partition_start
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_HARPUT }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_HARPUT
						has_claim = s:STATE_HARPUT
					}
				}
			}
			s:STATE_HARPUT = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_DIYARBAKIR }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_DIYARBAKIR
						has_claim = s:STATE_DIYARBAKIR
					}
				}
			}
			s:STATE_DIYARBAKIR = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_TRABZON }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_TRABZON
						has_claim = s:STATE_TRABZON
					}
				}
			}
			s:STATE_TRABZON = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_ERZURUM }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_ERZURUM
						has_claim = s:STATE_ERZURUM
					}
				}
			}
			s:STATE_ERZURUM = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_BITLIS }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_BITLIS
						has_claim = s:STATE_BITLIS
					}
				}
			}
			s:STATE_BITLIS = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_ALEPPO }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_ALEPPO
						has_claim = s:STATE_ALEPPO
					}
				}
			}
			s:STATE_ALEPPO = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_DEIR_EZ_ZOR }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_DEIR_EZ_ZOR
						has_claim = s:STATE_DEIR_EZ_ZOR
					}
				}
			}
			s:STATE_DEIR_EZ_ZOR = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_VAN }
				c:PER = {
					NOR = { 
						owns_entire_state_region = STATE_VAN
						has_claim = s:STATE_VAN
					}
				}
			}
			s:STATE_VAN = {
				add_claim = c:PER
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_KARS }
				c:PER = {
					NOR = { 
						owns_entire_state_region = STATE_KARS
						has_claim = s:STATE_KARS
					}
				}
			}
			s:STATE_KARS = {
				add_claim = c:PER
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_MOSUL }
				c:PER = {
					NOR = { 
						owns_entire_state_region = STATE_MOSUL
						has_claim = s:STATE_MOSUL
					}
				}
			}
			s:STATE_MOSUL = {
				add_claim = c:PER
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_SHAHRIZOR }
				c:PER = {
					NOR = { 
						owns_entire_state_region = STATE_SHAHRIZOR
						has_claim = s:STATE_SHAHRIZOR
					}
				}
			}
			s:STATE_SHAHRIZOR = {
				add_claim = c:PER
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_ANBAR }
				c:PER = {
					NOR = { 
						owns_entire_state_region = STATE_ANBAR
						has_claim = s:STATE_ANBAR
					}
				}
			}
			s:STATE_ANBAR = {
				add_claim = c:PER
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_GREATER_CAUCASUS }
				c:PER = {
					NOR = { 
						owns_entire_state_region = STATE_GREATER_CAUCASUS
						has_claim = s:STATE_GREATER_CAUCASUS
					}
				}
			}
			s:STATE_GREATER_CAUCASUS = {
				add_claim = c:PER
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
	}

	option = {
		name = akkovin_crisis.9.a
		default_option = yes
		trigger = { c:TUR = ROOT }
		add_journal_entry = {
			type = je_akkovin_partition_tur
		}
		
		ai_chance = {
			base = 100
		}
	}
	
	option = {
		name = akkovin_crisis.9.b
		default_option = yes
		trigger = { c:PER = ROOT }
		add_journal_entry = {
			type = je_akkovin_partition_per
		}
		
		ai_chance = {
			base = 100
		}
	}
	
	option = {
		name = akkovin_crisis.9.c
		set_global_variable = akkovin_partition_start
		
		ai_chance = {
			base = 0
		}
	}
}

# Ottoman-Akkovin Conflict (Treaty of Baglar)
akkovin_crisis.10 = {
	type = country_event
	placement = root
	title = akkovin_crisis.10.t
	desc = akkovin_crisis.10.d
	flavor = akkovin_crisis.10.f

	duration = 3

	event_image = {
		video = "unspecific_factory_closed"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
		NOT = { has_global_variable = akkovin_partition_start }
		exists = c:PER
		AND = {
			exists = c:TUR
			c:TUR = ROOT
			is_at_war = no
		}
		exists = c:AKN
		c:AKN = { 
			has_variable = akkovin_fail 
			is_country_type = unrecognized
			OR = {
				has_modifier = treaty_of_baglar
				has_modifier = treaty_of_baglar_2
			}
		}
	}

	immediate = {
		c:AKN ?= { save_scope_as = akn_scope }
		c:PER ?= { save_scope_as = per_scope }
		set_global_variable = akkovin_partition_start
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_HARPUT }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_HARPUT
						has_claim = s:STATE_HARPUT
					}
				}
			}
			s:STATE_HARPUT = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_DIYARBAKIR }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_DIYARBAKIR
						has_claim = s:STATE_DIYARBAKIR
					}
				}
			}
			s:STATE_DIYARBAKIR = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_TRABZON }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_TRABZON
						has_claim = s:STATE_TRABZON
					}
				}
			}
			s:STATE_TRABZON = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_ERZURUM }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_ERZURUM
						has_claim = s:STATE_ERZURUM
					}
				}
			}
			s:STATE_ERZURUM = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_BITLIS }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_BITLIS
						has_claim = s:STATE_BITLIS
					}
				}
			}
			s:STATE_BITLIS = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_ALEPPO }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_ALEPPO
						has_claim = s:STATE_ALEPPO
					}
				}
			}
			s:STATE_ALEPPO = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_DEIR_EZ_ZOR }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_DEIR_EZ_ZOR
						has_claim = s:STATE_DEIR_EZ_ZOR
					}
				}
			}
			s:STATE_DEIR_EZ_ZOR = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
	}

	option = {
		name = akkovin_crisis.10.a
		default_option = yes
		
		add_journal_entry = {
			type = je_akkovin_partition_tur
		}
		
		custom_tooltip = war_persia.tt
		
		ai_chance = {
			base = 100
		}
	}
	
	option = {
		name = akkovin_crisis.10.b
		set_global_variable = akkovin_partition_start
		
		ai_chance = {
			base = 0
		}
	}
}

# Akkovin Partition War (No Treaty of Baglar) MOVED TO SCRIPTED BUTTONS
#akkovin_crisis.11 = {
#	type = country_event
#	placement = root
#	title = akkovin_crisis.11.t
#	desc = akkovin_crisis.11.d
#	flavor = akkovin_crisis.11.f
#
#	duration = 3
#
#	event_image = {
#		video = "europenorthamerica_before_the_battle"
#	}
#
#	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
#
#	icon = "gfx/interface/icons/event_icons/event_skull.dds"
#
#	trigger = {
#		#Triggered by Akkovin Partition (Ottoman) JE
#	}
#
#	option = {
#		name = akkovin_crisis.11.a
#		
#	}
#}

# Ottoman-Akkovin War (Treaty of Baglar) MOVED TO SCRIPTED BUTTONS
#akkovin_crisis.12 = {
#	type = country_event
#	placement = root
#	title = akkovin_crisis.12.t
#	desc = akkovin_crisis.12.d
#	flavor = akkovin_crisis.12.f
#
#	duration = 3
#
#	event_image = {
#		video = "europenorthamerica_before_the_battle"
#	}
#
#	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
#
#	icon = "gfx/interface/icons/event_icons/event_skull.dds"
#
#	trigger = {
#		#Triggered by Akkovin Partition (Ottoman) JE
#	}
#
#	option = {
#		name = akkovin_crisis.12.a
#		
#	}
#}

# Prepare for War with the Ottomans
#akkovin_crisis.13 = {
#	type = country_event
#	placement = root
#	title = akkovin_crisis.13.t
#	desc = akkovin_crisis.13.d
#	flavor = akkovin_crisis.13.f
#
#	duration = 3
#
#	event_image = {
#		video = "europenorthamerica_before_the_battle"
#	}
#
#	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
#
#	icon = "gfx/interface/icons/event_icons/event_skull.dds"
#
#	trigger = {
#		#Triggered by Ottoman event
#	}
#
#	option = {
#		name = akkovin_crisis.13.a
#	}
#}

# Restoring Order to former Akkovin lands
akkovin_crisis.14 = {
	type = country_event
	placement = root
	title = akkovin_crisis.14.t
	desc = akkovin_crisis.14.d
	flavor = akkovin_crisis.14.f

	duration = 3

	event_image = {
		video = "unspecific_factory_closed"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
		#Triggered by Ottomans winning the Ottoman-Akkovin War
	}
	
	immediate = {
		c:TUR = {
			save_scope_as = tur_scope
		}
		every_state = {
			limit = {
				has_modifier = kurdish_autonomy
			}
			remove_modifier = kurdish_autonomy
		}
		create_country = {
			tag = KUR
			origin = THIS
			state = s:STATE_SHAHRIZOR.region_state:PER
		}
	}

	option = {
		name = akkovin_crisis.14.a
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_SHAHRIZOR }
			}
			s:STATE_SHAHRIZOR.region_state:AKN = {
				set_state_owner = c:KUR
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_MOSUL }
			}
			s:STATE_MOSUL.region_state:AKN = {
				set_state_owner = c:KUR
			}
			c:KUR = { set_capital = STATE_MOSUL }
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_ANBAR }
			}
			s:STATE_ANBAR.region_state:AKN = {
				set_state_owner = c:KUR
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_VAN }
			}
			s:STATE_VAN.region_state:AKN = {
				set_state_owner = c:KUR
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_KARS }
			}
			s:STATE_KARS.region_state:AKN = {
				if = {
					limit = { exists = c:SRV }
					set_state_owner = c:SRV
				}
				else = {
					set_state_owner = ROOT
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_GREATER_CAUCASUS }
			}
			s:STATE_GREATER_CAUCASUS.region_state:AKN = {
				if = {
					limit = { exists = c:SRV }
					set_state_owner = c:SRV
				}
				else = {
					set_state_owner = ROOT
				}
			}
		}
		root = {
			create_diplomatic_pact = {
				country = c:KUR
				type = puppet
			}
		}
	}
}

# Restoring Order to Akturkistan (Akkovin)
#akkovin_crisis.15 = {
#	type = country_event
#	placement = root
#	title = akkovin_crisis.15.t
#	desc = akkovin_crisis.15.d
#	flavor = akkovin_crisis.15.f
#
#	duration = 3
#
#	event_image = {
#		video = "unspecific_factory_closed"
#	}
#
#	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
#
#	icon = "gfx/interface/icons/event_icons/event_skull.dds"
#
#	trigger = {
#		#Triggered by Ottomans losing the Ottoman-Akkovin War
#	}
#
#	option = {
#		name = akkovin_crisis.15.a
#		if = {
#			limit = { has_modifier = treaty_of_baglar }
#			remove_modifier = treaty_of_baglar
#		}
#		else = {
#			remove_modifier = treaty_of_baglar_2
#		}
#		set_owes_obligation_to = { country = c:PER setting = no }
#		remove_variable = baglar_treaty_signed
#	}
#}

# End of the Akkovin Sultanate
akkovin_crisis.16 = {
	type = country_event
	placement = root
	title = akkovin_crisis.16.t
	desc = akkovin_crisis.16.d
	flavor = akkovin_crisis.16.f

	duration = 3

	event_image = {
		video = "unspecific_factory_closed"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
		NOT = { exists = c:AKN }
		NOT = { has_variable = rip_akkovins }
		OR = {
			has_interest_marker_in_region = region_arabic
			has_interest_marker_in_region = region_anatolia
			has_interest_marker_in_region = region_persia
		}
	}
	
	immediate = {
		set_variable = rip_akkovins
		every_scope_state = {
			limit = {
				state_region = { 
					is_homeland = cu:akturk
				}
            }
			save_scope_as = akturk_state
		}
	}

	option = {
		name = akkovin_crisis.16.a
		if = {
			limit = { exists = scope:akturk_state }
			scope:akturk_state = {
				add_radicals_in_state = {
					value = very_large_radicals
					culture = cu:akturk
				}
			}
		}
	}
}

# Akkovin leaders embrace reform
akkovin_crisis.17 = {
	type = country_event
	placement = root
	title = akkovin_crisis.17.t
	desc = akkovin_crisis.17.d
	flavor = akkovin_crisis.17.f

	duration = 3

	event_image = {
		video = "unspecific_ruler_speaking_to_people"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	immediate = {
		set_variable = ideology_change
	}

	option = {
		name = akkovin_crisis.17.a
		if = {
			limit = {
				ruler = {
					NOR = { 
						has_ideology = ideology:ideology_moderate_reformer 
						has_ideology = ideology:ideology_reformer
					}
				}
			}
			ruler = {
				set_ideology = ideology:ideology_moderate_reformer
			}
		}
		if = {
			limit = {
				any_scope_character = {
					has_variable = is_halil
				}
			}
			random_scope_character = {
				limit = { has_variable = is_halil }
				set_ideology = ideology:ideology_reformer
			}
		}
	}
}

# Scripted Akkovin Partition War (with Persia)
akkovin_crisis.18 = {
	type = country_event
	hidden = yes

	trigger = {
	}

	immediate = {
		if = {
			limit = { 
				ROOT = {
					has_journal_entry = je_akkovin_partition_tur
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = c:TUR
					target_is = c:AKN
				}
				add_initiator_backers = {
					c:PER
				}
			}
		}
		else_if = {
			limit = { 
				ROOT = {
					has_journal_entry = je_akkovin_partition_per
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = c:PER
					target_is = c:AKN
				}
				add_initiator_backers = {
					c:TUR
				}
			}
		}
		if = {
			limit = { 
				s:STATE_TRABZON = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:TUR
					type = return_state
					target_state = s:STATE_TRABZON.region_state:AKN
					primary_demand = yes
				}
			}
		}
		if = {
			limit = { 
				s:STATE_HARPUT = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:TUR
					type = return_state
					target_state = s:STATE_HARPUT.region_state:AKN
					primary_demand = yes
				}
			}
		}
		if = {
			limit = { 
				s:STATE_ERZURUM = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:TUR
					type = return_state
					target_state = s:STATE_ERZURUM.region_state:AKN
					primary_demand = yes
				}
			}
		}
		if = {
			limit = { 
				s:STATE_BITLIS = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:TUR
					type = return_state
					target_state = s:STATE_BITLIS.region_state:AKN
					primary_demand = yes
				}
			}
		}
		if = {
			limit = { 
				s:STATE_ALEPPO = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:TUR
					type = return_state
					target_state = s:STATE_ALEPPO.region_state:AKN
					primary_demand = yes
				}
			}
		}
		if = {
			limit = { 
				s:STATE_VAN = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:PER
					type = return_state
					target_state = s:STATE_VAN.region_state:AKN
					primary_demand = yes
				}
			}
		}
		if = {
			limit = { 
				s:STATE_KARS = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:PER
					type = return_state
					target_state = s:STATE_KARS.region_state:AKN
					primary_demand = yes
				}
			}
		}
		if = {
			limit = { 
				s:STATE_MOSUL = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:PER
					type = return_state
					target_state = s:STATE_MOSUL.region_state:AKN
					primary_demand = yes
				}
			}
		}
		if = {
			limit = { 
				s:STATE_SHAHRIZOR = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:PER
					type = return_state
					target_state = s:STATE_SHAHRIZOR.region_state:AKN
					primary_demand = yes
				}
			}
		}
		if = {
			limit = { 
				c:PER = {
					has_journal_entry = je_akkovin_partition_per
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:PER
					type = return_state
					target_state = s:STATE_ANBAR.region_state:AKN
					primary_demand = yes
				}
			}
		}
		if = {
			limit = { 
				s:STATE_GREATER_CAUCASUS = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:PER
					type = return_state
					target_state = s:STATE_GREATER_CAUCASUS.region_state:AKN
					primary_demand = yes
				}
			}
		}
		
		set_tariffs_import_priority = g:small_arms
		set_tariffs_import_priority = g:artillery
	}
}

# Scripted Akkovin Partition War (without Persia)
akkovin_crisis.19 = {
	type = country_event
	hidden = yes

	trigger = {
	}

	immediate = {
		if = {
			limit = { 
				s:STATE_TRABZON = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:TUR
					type = return_state
					target_state = s:STATE_TRABZON.region_state:AKN
					primary_demand = yes
				}
			}
		}
		if = {
			limit = { 
				s:STATE_HARPUT = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:TUR
					type = return_state
					target_state = s:STATE_HARPUT.region_state:AKN
					primary_demand = yes
				}
			}
		}
		if = {
			limit = { 
				s:STATE_ERZURUM = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:TUR
					type = return_state
					target_state = s:STATE_ERZURUM.region_state:AKN
					primary_demand = yes
				}
			}
		}
		if = {
			limit = { 
				s:STATE_BITLIS = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:TUR
					type = return_state
					target_state = s:STATE_BITLIS.region_state:AKN
					primary_demand = yes
				}
			}
		}
		if = {
			limit = { 
				s:STATE_ALEPPO = {
					has_variable = akkovin_partition_state
				}
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = ROOT
					target_is = c:AKN
				}
				add_war_goal = {
					holder = c:TUR
					type = return_state
					target_state = s:STATE_ALEPPO.region_state:AKN
					primary_demand = yes
				}
			}
		}
		
		set_tariffs_import_priority = g:small_arms
		set_tariffs_import_priority = g:artillery
	}
}