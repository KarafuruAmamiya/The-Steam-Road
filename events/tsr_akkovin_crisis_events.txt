namespace = akkovin_crisis

# Start event
akkovin_crisis.1 = {
	type = country_event
	placement = root
	title = akkovin_crisis.1.t
	desc = akkovin_crisis.1.d
	flavor = akkovin_crisis.1.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_factory_closed.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/factory_closed"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
	}

	immediate = {
		set_variable = {
			name = akc_reform_var
			value = 0
		}
		set_variable = {
			name = akc_kurdish_separatist_var
			value = 0
		}
		set_variable = {
			name = akc_dhimmi_separatist_var
			value = 0
		}
		set_variable = {
			name = akc_arab_separatist_var
			value = 0
		}
		add_journal_entry = {
			type = je_akkovin_crisis
		}
	}

	option = {
		name = akkovin_crisis.1.a
		add_journal_entry = {
			type = je_akkovin_reform_economy
		}
		add_journal_entry = {
			type = je_akkovin_reform_education
		}
		add_journal_entry = {
			type = je_akkovin_reform_army
		}
		add_journal_entry = {
			type = je_akkovin_reform_navy
		}
		add_journal_entry = {
			type = je_akkovin_reform_bureaucracy
		}
		add_journal_entry = {
			type = je_akkovin_reform_sovereignty
		}
		add_journal_entry = {
			type = je_akkovin_reform_kurdish
		}
		add_journal_entry = {
			type = je_akkovin_reform_arabia
		}
		add_journal_entry = {
			type = je_akkovin_reform_minorities
		}
		add_journal_entry = {
			type = je_akkovin_reform_nationalism
		}
	}
}

# Fail event
akkovin_crisis.2 = { # Collapse of the Akkovin Confederation
	type = country_event
	placement = root
	title = akkovin_crisis.2.t
	desc = akkovin_crisis.2.d
	flavor = akkovin_crisis.2.f
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_factory_closed.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/factory_closed"

	trigger = {
	}

	immediate = {
		set_variable = akkovin_fail
		remove_modifier = foreign_studies
		ig:ig_intelligentsia = {
			remove_modifier = foreign_students
		}
		ig:ig_petty_bourgeoisie = {
			remove_modifier = foreign_students
		}
		ig:ig_industrialists = {
			remove_modifier = foreign_students
		}
		ruler = {
			save_scope_as = akkovin_sultan
		}
	}
	
	option = {
		name = akkovin_crisis.2.a
		if = {
			limit = {
				any_subject_or_below = {
					OR = {
						country_is_in_europe = yes
						country_is_in_middle_east = yes
					}
				}
			}
			every_subject_or_below = {
				limit = {
					OR = {
						country_is_in_europe = yes
						country_is_in_middle_east = yes
					}
				}
				make_independent = yes
			}
		}
		if = {
			limit = {
				has_state_in_state_region = STATE_ERITREA
				exists = c:MED
			}
			s:STATE_ERITREA.region_state:AKN = {
				set_state_owner = c:MED
			}
		}
		else_if = {
			limit = {
				has_state_in_state_region = STATE_ERITREA
				exists = c:ETH
				c:ETH = { has_state_in_state_region = STATE_ERITREA }
			}
			s:STATE_ERITREA.region_state:AKN = {
				set_state_owner = c:ETH
			}
		}
		else_if = {
			limit = {
				has_state_in_state_region = STATE_ERITREA
				exists = c:EGY
			}
			s:STATE_ERITREA.region_state:AKN = {
				set_state_owner = c:EGY
			}
		}
		else_if = {
			limit = {
				has_state_in_state_region = STATE_ERITREA
				exists = c:FRA
			}
			s:STATE_ERITREA.region_state:AKN = {
				set_state_owner = c:FRA
			}
		}
		set_country_type = unrecognized
		ruler = {
			kill_character = yes
		}
	}

}

# Crisis averted
akkovin_crisis.3 = {
	type = country_event
	placement = root
	title = akkovin_crisis.3.t
	desc = akkovin_crisis.3.d
	flavor = akkovin_crisis.3.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_london_center.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/london_center"

	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	trigger = {
	}

	immediate = {
		set_variable = akc_reforms_complete
		remove_modifier = akkovin_crisis
		remove_modifier = outmoded_bureaucracy
		remove_modifier = tribal_structures
		remove_modifier = cizye_tax
		remove_modifier = foreign_studies
		ig:ig_intelligentsia = {
			remove_modifier = foreign_students
		}
		ig:ig_petty_bourgeoisie = {
			remove_modifier = foreign_students
		}
		ig:ig_industrialists = {
			remove_modifier = foreign_students
		}
		add_modifier = {
			name = akn_crisis_averted_country
			months = normal_modifier_time
		}
		every_interest_group = {
			limit = {
				NOT = { is_interest_group_type = ig_trade_unions }
			}
			add_modifier = {
				name = akn_crisis_averted_ig
				months = normal_modifier_time
			}
		}
		add_loyalists = {
			culture = cu:akturk
			value = 0.25
		}
	}

	option = {
		name = akkovin_crisis.3.a
		default_option = yes
		trigger = {
			has_variable = completed_sick_man_army_je
		}
		add_modifier = {
			name = akkovin_army_reform
			months = normal_modifier_time
		}
	}
	option = {
		name = akkovin_crisis.3.b
		trigger = {
			AND = {
				has_variable = completed_akkovin_reform_sovereignty_je
				has_variable = completed_akkovin_reform_arabia_je
			}
			NAND = {
				owns_entire_state_region = STATE_HARPUT
				owns_entire_state_region = STATE_SIVAS
				owns_entire_state_region = STATE_CYPRUS
				owns_entire_state_region = STATE_SHAHRIZOR
				owns_entire_state_region = STATE_KARS
				owns_entire_state_region = STATE_ARMENIA
			}
		}
		s:STATE_HARPUT = {
			add_claim = ROOT
		}
		s:STATE_SIVAS = {
			add_claim = ROOT
		}
		s:STATE_CYPRUS = {
			add_claim = ROOT
		}
		s:STATE_SHAHRIZOR = {
			add_claim = ROOT
		}
		s:STATE_KARS = {
			add_claim = ROOT
		}
		s:STATE_ARMENIA = {
			add_claim = ROOT
		}
	}
	option = {
		name = akkovin_crisis.3.c
		trigger = {
			has_variable = completed_akkovin_reform_economy_je
		}
		add_modifier = {
			name = akkovin_urbanization
			months = normal_modifier_time
		}
	}
	option = {
		name = akkovin_crisis.3.d
		trigger = {
			has_variable = completed_akkovin_reform_education_je
		}
		add_modifier = {
			name = akkovin_education
			months = normal_modifier_time
		}
	}
	option = {
		name = akkovin_crisis.3.e
		trigger = {
			has_variable = completed_akkovin_reform_bureaucracy_je
		}
		add_modifier = {
			name = akkovin_bureaucracy
			months = normal_modifier_time
		}
	}
}

# Fate of the Gunpowder Alliance (For Safavids)
akkovin_crisis.4 = {
	type = country_event
	placement = root
	title = akkovin_crisis.4.t
	desc = akkovin_crisis.4.d
	flavor = akkovin_crisis.4.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/middleeast_battlefield_trenches.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/battlefield_trenches"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	immediate = {
		set_variable = pre_treaty
		c:AKN = { save_scope_as = akn_scope }
	}

	option = {
		name = akkovin_crisis.4.a
		c:AKN = {
			trigger_event = { id = akkovin_crisis.5 days = 3 }
		}
	}
}

# An Agreement with the Safavid Empire?
akkovin_crisis.5 = {
	type = country_event
	placement = root
	title = akkovin_crisis.5.t
	desc = akkovin_crisis.5.d
	flavor = akkovin_crisis.5.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/southamerica_aristocrats.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_diplomacy.dds"

	trigger = {
	}

	immediate = {
	}

	option = {
		name = akkovin_crisis.5.a
		trigger_event = { id = akkovin_crisis.6 days = 7 }
		c:PER = { trigger_event = { id = akkovin_crisis.6 days = 7 } }
		add_modifier = {
			name = prestige_loss
			months = normal_modifier_time
		}
	}
}

# The Treaty of Baglar
akkovin_crisis.6 = {
	type = country_event
	placement = root
	title = akkovin_crisis.6.t
	desc = akkovin_crisis.6.d
	flavor = akkovin_crisis.6.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_signed_contract.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/signed_contract"

	icon = "gfx/interface/icons/event_icons/event_diplomacy.dds"

	immediate = {
		c:AKN = { save_scope_as = akn_scope }
		c:PER = { save_scope_as = per_scope }
	}

	option = {
		name = akkovin_crisis.6.a
		trigger = {
			c:AKN = ROOT
		}
		add_modifier = {
			name = treaty_of_baglar
			months = 120
		}
		custom_tooltip = treaty_of_baglar_tt
		set_variable = baglar_treaty_signed
		
		hidden_effect = {
			trigger_event = { id = akkovin_crisis.7 months = 120 }
		}
	}
	
	option = {
		name = akkovin_crisis.6.b
		trigger = {
			c:PER = ROOT
		}
		create_diplomatic_pact = {
			country = c:AKN
			type = defensive_pact
		}
		custom_tooltip = treaty_of_baglar_tt
		set_variable = baglar_treaty_signed
	}
}

# Renewing the Treaty of Baglar
akkovin_crisis.7 = {
	type = country_event
	placement = root
	title = akkovin_crisis.7.t
	desc = akkovin_crisis.7.d
	flavor = akkovin_crisis.7.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_signed_contract.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/signed_contract"

	icon = "gfx/interface/icons/event_icons/event_diplomacy.dds"

	immediate = {
		c:AKN = { save_scope_as = akn_scope }
		c:PER = { save_scope_as = per_scope }
	}

	option = {
		name = akkovin_crisis.7.a
		add_modifier = {
			name = treaty_of_baglar_2
			months = -1
		}
		activate_law = law_type:law_free_trade
		activate_law = law_type:law_legacy_slavery
		
		every_subject_or_below = {
			activate_law = law_type:law_free_trade
			activate_law = law_type:law_legacy_slavery
		}
		
		ai_chance = {
			base = 50
		}
		
		c:PER = { trigger_event = { id = treaty_of_baglar_events.1 days = 1 } }
	}
	
	option = {
		name = akkovin_crisis.7.b
		default_option = yes
		change_relations = {
			country = c:PER
			value = -100
		}
		remove_diplomatic_pact = {
			country = c:PER
			type = trade_agreement
		}
		remove_diplomatic_pact = {
			country = c:PER
			type = defensive_pact
		}
		
		ai_chance = {
			base = 50
		}
		custom_tooltip = no_renewing_baglar_tt
		
		c:PER = { trigger_event = { id = treaty_of_baglar_events.2 days = 1 } }
	}
}

# Kurdish Revolts
akkovin_crisis.8 = {
	type = country_event
	placement = root
	title = akkovin_crisis.8.t
	desc = akkovin_crisis.8.d
	flavor = akkovin_crisis.8.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"

	icon = "gfx/interface/icons/event_icons/event_revolt.dds"

	trigger = {
		NOT = {
			any_scope_state = {
				has_modifier = kurdish_autonomy
			}
		}
	}

	option = {
		name = akkovin_crisis.8.a
		default_option = yes
		remove_primary_culture = cu:kurdish
		add_radicals = {
			culture = cu:kurdish
			value = very_large_radicals
		}
		
		ai_chance = {
			base = 100
		}
	}
	
	option = {
		name = akkovin_crisis.8.b
		trigger_event = { id = akkovin_flavor.4 days = 0 }
		
		ai_chance = {
			base = 0
		}
	}
}

# Partition of the Akkovin Sultanate
akkovin_crisis.9 = {
	type = country_event
	placement = root
	title = akkovin_crisis.9.t
	desc = akkovin_crisis.9.d
	flavor = akkovin_crisis.9.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_factory_closed.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/factory_closed"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
		NOT = { has_global_variable = akkovin_partition_start }
		OR = {
			AND = {
				exists = c:TUR
				c:TUR = ROOT
				is_at_war = no
			}
			AND = {
				exists = c:PER
				c:PER = ROOT
				is_at_war = no
			}
		}
		exists = c:AKN
		c:AKN = { 
			has_variable = akkovin_fail 
			is_country_type = unrecognized
			any_scope_state = {
				is_incorporated = yes
				count < 9
			}
			OR = {
				NOT = { has_modifier = treaty_of_baglar }
				NOT = { has_modifier = treaty_of_baglar_2 }
			}
		}
	}

	immediate = {
		c:AKN = { save_scope_as = akn_scope }
		set_global_variable = akkovin_partition_start
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_HARPUT }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_HARPUT
						has_claim = s:STATE_HARPUT
					}
				}
			}
			s:STATE_HARPUT = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_DIYARBAKIR }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_DIYARBAKIR
						has_claim = s:STATE_DIYARBAKIR
					}
				}
			}
			s:STATE_DIYARBAKIR = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_TRABZON }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_TRABZON
						has_claim = s:STATE_TRABZON
					}
				}
			}
			s:STATE_TRABZON = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_ERZURUM }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_ERZURUM
						has_claim = s:STATE_ERZURUM
					}
				}
			}
			s:STATE_ERZURUM = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_BITLIS }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_BITLIS
						has_claim = s:STATE_BITLIS
					}
				}
			}
			s:STATE_BITLIS = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_KUBAN }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_KUBAN
						has_claim = s:STATE_KUBAN
					}
				}
			}
			s:STATE_KUBAN = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_ALEPPO }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_ALEPPO
						has_claim = s:STATE_ALEPPO
					}
				}
			}
			s:STATE_ALEPPO = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_DEIR_EZ_ZOR }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_DEIR_EZ_ZOR
						has_claim = s:STATE_DEIR_EZ_ZOR
					}
				}
			}
			s:STATE_DEIR_EZ_ZOR = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_VAN }
				c:PER = {
					NOR = { 
						owns_entire_state_region = STATE_VAN
						has_claim = s:STATE_VAN
					}
				}
			}
			s:STATE_VAN = {
				add_claim = c:PER
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_KARS }
				c:PER = {
					NOR = { 
						owns_entire_state_region = STATE_KARS
						has_claim = s:STATE_KARS
					}
				}
			}
			s:STATE_KARS = {
				add_claim = c:PER
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_MOSUL }
				c:PER = {
					NOR = { 
						owns_entire_state_region = STATE_MOSUL
						has_claim = s:STATE_MOSUL
					}
				}
			}
			s:STATE_MOSUL = {
				add_claim = c:PER
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_SHAHRIZOR }
				c:PER = {
					NOR = { 
						owns_entire_state_region = STATE_SHAHRIZOR
						has_claim = s:STATE_SHAHRIZOR
					}
				}
			}
			s:STATE_SHAHRIZOR = {
				add_claim = c:PER
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_ANBAR }
				c:PER = {
					NOR = { 
						owns_entire_state_region = STATE_ANBAR
						has_claim = s:STATE_ANBAR
					}
				}
			}
			s:STATE_ANBAR = {
				add_claim = c:PER
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_GREATER_CAUCASUS }
				c:PER = {
					NOR = { 
						owns_entire_state_region = STATE_GREATER_CAUCASUS
						has_claim = s:STATE_GREATER_CAUCASUS
					}
				}
			}
			s:STATE_GREATER_CAUCASUS = {
				add_claim = c:PER
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
	}

	option = {
		name = akkovin_crisis.9.a
		default_option = yes
		trigger = { c:TUR = ROOT }
		add_journal_entry = {
			type = je_akkovin_partition_tur
		}
		
		ai_chance = {
			base = 100
		}
	}
	
	option = {
		name = akkovin_crisis.9.b
		default_option = yes
		trigger = { c:PER = ROOT }
		add_journal_entry = {
			type = je_akkovin_partition_per
		}
		
		ai_chance = {
			base = 100
		}
	}
	
	option = {
		name = akkovin_crisis.9.c
		set_global_variable = akkovin_partition_start
		
		ai_chance = {
			base = 0
		}
	}
}

# Ottoman-Akkovin Conflict (Treaty of Baglar)
akkovin_crisis.10 = {
	type = country_event
	placement = root
	title = akkovin_crisis.10.t
	desc = akkovin_crisis.10.d
	flavor = akkovin_crisis.10.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_factory_closed.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/factory_closed"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
		NOT = { has_global_variable = akkovin_partition_start }
		exists = c:PER
		AND = {
			exists = c:TUR
			c:TUR = ROOT
			is_at_war = no
		}
		exists = c:AKN
		c:AKN = { 
			has_variable = akkovin_fail 
			is_country_type = unrecognized
			OR = {
				has_modifier = treaty_of_baglar
				has_modifier = treaty_of_baglar_2
			}
		}
	}

	immediate = {
		set_global_variable = akkovin_partition_start
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_HARPUT }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_HARPUT
						has_claim = s:STATE_HARPUT
					}
				}
			}
			s:STATE_HARPUT = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_DIYARBAKIR }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_DIYARBAKIR
						has_claim = s:STATE_DIYARBAKIR
					}
				}
			}
			s:STATE_DIYARBAKIR = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_TRABZON }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_TRABZON
						has_claim = s:STATE_TRABZON
					}
				}
			}
			s:STATE_TRABZON = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_ERZURUM }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_ERZURUM
						has_claim = s:STATE_ERZURUM
					}
				}
			}
			s:STATE_ERZURUM = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_BITLIS }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_BITLIS
						has_claim = s:STATE_BITLIS
					}
				}
			}
			s:STATE_BITLIS = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_KUBAN }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_KUBAN
						has_claim = s:STATE_KUBAN
					}
				}
			}
			s:STATE_KUBAN = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_ALEPPO }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_ALEPPO
						has_claim = s:STATE_ALEPPO
					}
				}
			}
			s:STATE_ALEPPO = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
		if = {
			limit = {
				c:AKN = { has_state_in_state_region = STATE_DEIR_EZ_ZOR }
				c:TUR = {
					NOR = { 
						owns_entire_state_region = STATE_DEIR_EZ_ZOR
						has_claim = s:STATE_DEIR_EZ_ZOR
					}
				}
			}
			s:STATE_DEIR_EZ_ZOR = {
				add_claim = c:TUR
				set_variable = {
					name = akkovin_partition_state
				}
			}
		}
	}

	option = {
		name = akkovin_crisis.10.a
		default_option = yes
		
		add_journal_entry = {
			type = je_akkovin_partition_tur
		}
		
		c:PER = { trigger_event = { id = akkovin_crisis.13 days = 0 } }
		
		ai_chance = {
			base = 100
		}
	}
	
	option = {
		name = akkovin_crisis.10.b
		set_global_variable = akkovin_partition_start
		
		ai_chance = {
			base = 0
		}
	}
}

# Akkovin Partition War (No Treaty of Baglar)
akkovin_crisis.11 = {
	type = country_event
	placement = root
	title = akkovin_crisis.11.t
	desc = akkovin_crisis.11.d
	flavor = akkovin_crisis.11.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_factory_closed.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/factory_closed"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
		#Triggered by Akkovin Partition (Ottoman) JE
	}

	option = {
		name = akkovin_crisis.11.a
		create_diplomatic_play = {
			name = akkovin_partition_war
			target_state = s:STATE_DIYARBAKIR.region_state:AKN
			type = dp_return_state
			
			add_initiator_backers = {
				c:PER
			}
			
			add_target_backers = {
				#In the future Great Powers with interest in Arabia should be able to intervene
			}
			
			add_war_goal = {
				holder = c:TUR
				type = return_state
				target_state = s:STATE_TRABZON.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:TUR
				type = return_state
				target_state = s:STATE_HARPUT.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:TUR
				type = return_state
				target_state = s:STATE_ERZURUM.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:TUR
				type = return_state
				target_state = s:STATE_BITLIS.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:TUR
				type = return_state
				target_state = s:STATE_KUBAN.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:TUR
				type = return_state
				target_state = s:STATE_ALEPPO.region_state:AKN
				primary_demand = yes
			}

			add_war_goal = {
				holder = c:TUR
				type = return_state
				target_state = s:STATE_DEIR_EZ_ZOR.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:PER
				type = return_state
				target_state = s:STATE_VAN.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:PER
				type = return_state
				target_state = s:STATE_KARS.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:PER
				type = return_state
				target_state = s:STATE_MOSUL.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:PER
				type = return_state
				target_state = s:STATE_SHAHRIZOR.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:PER
				type = return_state
				target_state = s:STATE_ANBAR.region_state:AKN
				primary_demand = yes
			}

			add_war_goal = {
				holder = c:PER
				type = return_state
				target_state = s:STATE_GREATER_CAUCASUS.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:AKN
				type = war_reparations
				target_country = c:TUR
			}
			add_war_goal = {
				holder = c:AKN
				type = war_reparations
				target_country = c:PER
			}
		}
	}
}

# Ottoman-Akkovin War (Treaty of Baglar)
akkovin_crisis.12 = {
	type = country_event
	placement = root
	title = akkovin_crisis.12.t
	desc = akkovin_crisis.12.d
	flavor = akkovin_crisis.12.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_factory_closed.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/factory_closed"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
		#Triggered by Akkovin Partition (Ottoman) JE
	}

	option = {
		name = akkovin_crisis.12.a
		create_diplomatic_play = {
			name = akkovin_partition_war
			target_state = s:STATE_DIYARBAKIR.region_state:AKN
			type = dp_return_state
			
			add_target_backers = {
				c:PER
				#In the future Great Powers with interest in Arabia should be able to intervene
			}
			
			add_war_goal = {
				holder = c:TUR
				type = return_state
				target_state = s:STATE_TRABZON.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:TUR
				type = return_state
				target_state = s:STATE_HARPUT.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:TUR
				type = return_state
				target_state = s:STATE_ERZURUM.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:TUR
				type = return_state
				target_state = s:STATE_BITLIS.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:TUR
				type = return_state
				target_state = s:STATE_KUBAN.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:TUR
				type = return_state
				target_state = s:STATE_ALEPPO.region_state:AKN
				primary_demand = yes
			}

			add_war_goal = {
				holder = c:TUR
				type = return_state
				target_state = s:STATE_DEIR_EZ_ZOR.region_state:AKN
				primary_demand = yes
			}
			
			add_war_goal = {
				holder = c:AKN
				type = war_reparations
				target_country = c:TUR
			}
			add_war_goal = {
				holder = c:PER
				type = war_reparations
				target_country = c:TUR
			}
		}
	}
}

# Prepare for War with the Ottomans
akkovin_crisis.13 = {
	type = country_event
	placement = root
	title = akkovin_crisis.13.t
	desc = akkovin_crisis.13.d
	flavor = akkovin_crisis.13.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_factory_closed.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/factory_closed"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
		#Triggered by Ottoman event
	}

	option = {
		name = akkovin_crisis.13.a
	}
}

# Akkovin becomes a Persian protectorate
akkovin_crisis.14 = {
	type = country_event
	placement = root
	title = akkovin_crisis.14.t
	desc = akkovin_crisis.14.d
	flavor = akkovin_crisis.14.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_factory_closed.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/factory_closed"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
		#Triggered by Ottomans losing the Ottoman-Akkovin War
	}

	option = {
		name = akkovin_crisis.14.a
		create_diplomatic_pact = {
			country = c:AKN
			type = protectorate
		} 
		c:AKN = { trigger_event = { id = akkovin_crisis.15 days = 0 } }
	}
}

# Akkovin becomes a Persian protectorate (Akkovin)
akkovin_crisis.15 = {
	type = country_event
	placement = root
	title = akkovin_crisis.15.t
	desc = akkovin_crisis.15.d
	flavor = akkovin_crisis.15.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_factory_closed.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/factory_closed"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
		#Triggered by Ottomans losing the Ottoman-Akkovin War
	}

	option = {
		name = akkovin_crisis.15.a
		if = {
			limit = { has_modifier = treaty_of_baglar }
			remove_modifier = treaty_of_baglar
		}
		else = {
			remove_modifier = treaty_of_baglar_2
		}
		set_owes_obligation_to = { country = c:PER setting = no }
		remove_variable = baglar_treaty_signed
	}
}

# End of the Akkovin Sultanate
akkovin_crisis.16 = {
	type = country_event
	placement = root
	title = akkovin_crisis.16.t
	desc = akkovin_crisis.16.d
	flavor = akkovin_crisis.16.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_factory_closed.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/factory_closed"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
		#Triggered by Partition JE
	}
	
	immediate = {
		every_scope_state = {
			limit = {
				state_region = { 
					is_homeland = cu:akturk
				}
            }
			save_scope_as = akturk_state
		}
	}

	option = {
		name = akkovin_crisis.16.a
		scope:akturk_state = {
			add_radicals = {
                value = very_large_radicals
                culture = cu:akturk
            }
		}
	}
}

# Akkovin leaders embrace reform
akkovin_crisis.17 = {
	type = country_event
	placement = root
	title = akkovin_crisis.17.t
	desc = akkovin_crisis.17.d
	flavor = akkovin_crisis.17.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/asia_politician_parliament_motion.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/asia/politician_parliament_motion"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	immediate = {
		set_variable = ideology_change
	}

	option = {
		name = akkovin_crisis.17.a
		if = {
			limit = {
				any_scope_character = {
					has_variable = is_ali_iv
				}
			}
			random_scope_character = {
				limit = { has_variable = is_ali_iv }
				set_ideology = ideology_moderate_reformer
			}
		}
		if = {
			limit = {
				any_scope_character = {
					has_variable = is_halil
				}
			}
			random_scope_character = {
				limit = { has_variable = is_halil }
				set_ideology = ideology_reformer
			}
		}
	}
}