je_hindustani_uprising = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	group = je_group_tsr_content

	complete = {
		NOT = { exists = c:GUJ }
		any_scope_state = {
			filter = {
				state_is_in_india = yes
			}
			turmoil < 0.5
			percent >= 0.9
		}
		owns_entire_state_region = STATE_GUJARAT
		is_at_war = no
		is_diplomatic_play_committed_participant = no
	}

	on_complete = {
		trigger_event = { id = raj.1 days = 0 popup = yes }
		add_modifier = {
			name = company_crushed_mutiny
			months = normal_modifier_time
		}
	}
	
	fail = {
		NOT = {
			owns_entire_state_region = STATE_GUJARAT
		}
		custom_tooltip = {
			text = any_indian_state_breaksaway
			any_state = {
				has_variable = hindustani_subject_state
				NOR = {
					owner = root
					owner = { is_subject_of = root }
				}
			}
		}
		is_at_war = no
		is_diplomatic_play_committed_participant = no
	}
	
	on_fail = {
		trigger_event = { id = raj.7 days = 0 popup = yes }
		set_variable = failed_hindustani_uprising
	}

	weight = 100
	should_be_pinned_by_default = yes
}

je_surat_riots = {
	icon = "gfx/interface/icons/event_icons/event_revolt.dds"
	group = je_group_tsr_content
	
	is_shown_when_inactive = {
        exists = c:PER
        THIS = c:PER
		any_scope_state = {
			state_region = s:STATE_GUJARAT
		}
		any_scope_state = {
			state_region = s:STATE_SAURASHTRA
		}
    }
	
    possible = {
		game_date > 1856.1.1 #Technically caused by Persia having free trade post-Opium Wars, but it unfortunately didn't trigger :\
		any_scope_state = {
			filter = {
				OR = {
					state_region = s:STATE_GUJARAT
					state_region = s:STATE_SAURASHTRA
				}
			}
			average_sol < 10
			count = all
		}
		OR = {
			has_law = law_type:law_commercialized_agriculture
			has_law = law_type:law_free_trade
			any_subject_or_below = {
				country_is_in_india = yes
				any_primary_culture = {
					has_discrimination_trait = south_asian_heritage
				}
				has_technology_researched = nationalism
			}
		}
		NOT = { has_law = law_type:law_slavery_banned }
    }
	
	immediate = {
		set_variable = {
			name = surat_riots_var
			value = 0
		}
		trigger_event = { id = indian_flavor.3 days = 0 }
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		OR = {
			AND = {
				any_scope_state = {
					state_region = s:STATE_GUJARAT
					average_sol >= 10
				}
				any_scope_state = {
					state_region = s:STATE_SAURASHTRA
					average_sol >= 10
				}
			}
			has_law = law_type:law_slavery_banned
		}
	}

	on_complete = {
		trigger_event = { id = indian_flavor.4 days = 0 }
	}
	
	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					any_scope_state = {
						state_region = s:STATE_GUJARAT
						turmoil < 0.1
					}
					any_scope_state = {
						state_region = s:STATE_SAURASHTRA
						turmoil < 0.1
					}
					cu:gujarati = {
						culture_secession_progress = {
							target = ROOT
							value < 0.25
						}
					}
				}
				change_variable = {
					name = surat_riots_var
					add = 1
				}
			}
		}
		random_events = {
			100 = 0
			10 = indian_flavor.5 #Peasants attack
			10 = indian_flavor.6 #Ports boycotted
			10 = indian_flavor.7 #Attempts on restoring order
		}
	}
	
	fail = {
		OR = {
			any_scope_state = {
				state_region = s:STATE_GUJARAT
				turmoil >= 0.4
			}
			any_scope_state = {
				state_region = s:STATE_SAURASHTRA
				turmoil >= 0.4
			}
			cu:gujarati = {
				culture_secession_progress = {
					target = ROOT
					value > 0.9
				}
			}
		}
	}
	
	on_fail = {
		trigger_event = { id = raj.6 days = 0 }
	}

	current_value = {
		value = var:surat_riots_var
	}

	goal_add_value = {
		add = 60
	}

	invalid = {
		NOT = {
			owns_entire_state_region = STATE_GUJARAT
		}
	}

	transferable = no

	weight = 5000
	
	progressbar = yes
	should_be_pinned_by_default = yes
}