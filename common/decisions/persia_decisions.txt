excavation_of_persepolis = {
	is_shown = {
		owns_entire_state_region = STATE_FARS
		NOT = { has_variable = persepolis_excavation }
	}

	possible = {
		has_technology_researched = mechanical_tools	
	}

	when_taken = {
		custom_tooltip = {
			text = can_build_persepolis_tt
			set_variable = persepolis_excavation
		}
		add_treasury = -30000
	}

	ai_chance = {
		base = 100
	}
}

excavation_of_ctesiphon = {
	is_shown = {
		owns_entire_state_region = STATE_BAGHDAD
		NOT = { has_variable = ctesiphon_excavation }
	}

	possible = {
		has_technology_researched = mechanical_tools
		has_technology_researched = nationalism
	}

	when_taken = {
		custom_tooltip = {
			text = can_build_ctesiphon_tt
			set_variable = ctesiphon_excavation
		}
		add_treasury = -30000
	}

	ai_chance = {
		base = 100
	}
}

excavation_of_susa = {
	is_shown = {
		owns_entire_state_region = STATE_KHUZESTAN
		NOT = { has_variable = susa_excavation }
	}

	possible = {
		has_technology_researched = mechanical_tools
		has_technology_researched = dialectics
	}

	when_taken = {
		custom_tooltip = {
			text = can_build_susa_tt
			set_variable = susa_excavation
		}
		add_treasury = -30000
	}

	ai_chance = {
		base = 100
	}
}

grant_zoroastrian_rights = {
	is_shown = {
		country_has_primary_culture = cu:persian
	}

	possible = {
		NOT = {
			has_law = law_type:law_state_religion
		}
		NOT = { has_variable = granted_zoroastrian_rights }
		has_technology_researched = nationalism
	}

	when_taken = {
		custom_tooltip = {
			text = can_build_fire_temple_tt
			set_variable = granted_zoroastrian_rights
		}
		trigger_event = { id = persian_flavor.1 }
	}

	ai_chance = {
		base = 100
	}
}

encourage_unveiling = {
	is_shown = {
		country_definition = {
			religion = {
				has_discrimination_trait = muslim
			}
		}
		OR = {
			country_has_primary_culture = cu:circassian
			any_primary_culture = {
				OR = {
					has_discrimination_trait = arabic_heritage
					has_discrimination_trait = iranian_heritage
					has_discrimination_trait = turkic_heritage
					has_discrimination_trait = aramaic_heritage
				}
			}
		}
		NOT = { has_variable = kashf_e_hijab_var }
	}

	possible = {
		NOR = {
			has_law = law_type:law_state_religion
			has_law = law_type:law_no_womens_rights
		}
		has_law = law_type:law_slavery_banned
		ig:ig_devout = {
			ig_clout < 0.15
			is_in_government = no
		}
		custom_tooltip = {
			text = have_adopted_western_clothes_tt
			has_variable = adopt_western_clothes
			has_variable = adopt_western_uniforms
		}
	}

	when_taken = {
		custom_tooltip = {
			text = kashf_e_hijab_tt
			set_variable = kashf_e_hijab_var
		}
		trigger_event = { id = persian_flavor.32 }
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = {
				OR = {
					has_strategy = ai_strategy_progressive_agenda
					has_strategy = ai_strategy_egalitarian_agenda
					has_strategy = ai_strategy_nationalist_agenda
				}
			}
			add = 100
		}
		modifier = {
			trigger = {
				has_law = law_type:law_state_atheism
			}
			add = 1000
		}
	}
}

enforce_veiling = {
	is_shown = {
		country_definition = {
			religion = {
				has_discrimination_trait = muslim
			}
		}
		OR = {
			country_has_primary_culture = cu:circassian
			any_primary_culture = {
				OR = {
					has_discrimination_trait = arabic_heritage
					has_discrimination_trait = iranian_heritage
					has_discrimination_trait = turkic_heritage
					has_discrimination_trait = aramaic_heritage
				}
			}
		}
		has_variable = kashf_e_hijab_var
	}

	possible = {
		has_law = law_type:law_state_religion
		has_law = law_type:law_no_womens_rights
		ig:ig_devout = {
			ig_clout >= 0.15
			is_in_government = yes
			OR = {
				owner = {
					ruler = {
						OR = {
							has_ideology = ideology:ideology_traditionalist
							has_ideology = ideology:ideology_theocrat
						}
					}
				}
				leader = {
					OR = {
						has_ideology = ideology:ideology_traditionalist
						has_ideology = ideology:ideology_theocrat
					}
				}
			}
		}
	}

	when_taken = {
		custom_tooltip = {
			text = no_kashf_e_hijab_tt
			remove_variable = kashf_e_hijab_var
		}
		add_loyalists = {
			pop_type = clergymen
			value = medium_radicals
		}
		add_radicals = {
			strata = middle
			NOT = { pop_type = clergymen }
			value = medium_radicals
		}
		add_radicals = {
			strata = rich
			value = large_radicals
		}
		ig:ig_intelligentsia = {
			add_modifier = {
				name = forced_veiling
				months = long_modifier_time
			}
		}
	}

	ai_chance = {
		base = 0
		modifier = {
			trigger = {
				has_strategy = ai_strategy_reactionary_agenda
			}
			add = 100
		}
	}
}