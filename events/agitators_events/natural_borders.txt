namespace = natural_borders

# start event
natural_borders.1 = {
	type = country_event
	placement = root
	title = natural_borders.1.t
	desc = natural_borders.1.d
	flavor = natural_borders.1.f

	duration = 3

	dlc = dlc004

	event_image = {
		video = "unspecific_signed_contract"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	trigger = {
		# triggered by je_french_natural_borders
	}

	immediate = {
		random_interest_group = {
			limit = {
				is_powerful = yes
				is_in_government = yes
				OR = {
					is_interest_group_type = ig_armed_forces
					leader = {
						OR = {
							has_ideology = ideology:ideology_jingoist_leader
							has_ideology = ideology:ideology_ethno_nationalist
							has_ideology = ideology:ideology_fascist
							has_ideology = ideology:ideology_authoritarian
						}
					}
				}
			}
			leader = { save_scope_as = borders_leader }
		}
		s:STATE_LIGURIA = {
			random_scope_state = {
				save_scope_as = savoy_state
			}
		}
		s:STATE_NORTH_RHINE = {
			random_scope_state = {
				save_scope_as = rhineland_state
			}
		}
		s:STATE_FLANDERS = {
			random_scope_state = {
				save_scope_as = flanders_state
			}
		}
		c:FRA = { save_scope_as = france_scope }
	}

	option = {
		name = natural_borders.1.a
		default_option = yes
		ai_chance = {
			base = 1
		}
		if = {
			limit = {
				NOT = { owns_entire_state_region = STATE_FLANDERS }
			}
			s:STATE_FLANDERS = {
				add_claim = ROOT
			}
		}
		if = {
			limit = {
				NOT = { owns_entire_state_region = STATE_WALLONIA }
			}
			s:STATE_WALLONIA = {
				add_claim = ROOT
			}
		}
		if = {
			limit = {
				NOT = { owns_entire_state_region = STATE_LUXEMBOURG }
			}
			s:STATE_LUXEMBOURG = {
				add_claim = ROOT
			}
		}
		if = {
			limit = {
				NOT = { owns_entire_state_region = STATE_RHINELAND }
			}
			s:STATE_RHINELAND = {
				add_claim = ROOT
			}
		}
		if = {
			limit = {
				NOT = { owns_entire_state_region = STATE_NORTH_RHINE }
			}
			s:STATE_NORTH_RHINE = {
				add_claim = ROOT
			}
		}
		if = {
			limit = {
				NOT = { owns_entire_state_region = STATE_LORRAINE }
			}
			s:STATE_LORRAINE = {
				add_claim = ROOT
			}
		}
		if = {
			limit = {
				NOT = { owns_entire_state_region = STATE_ELSASS }
			}
			s:STATE_ELSASS = {
				add_claim = ROOT
			}
		}
		if = {
			limit = {
				NOT = { owns_entire_state_region = STATE_PFALZ }
			}
			s:STATE_PFALZ = {
				add_claim = ROOT
			}
		}
		if = {
			limit = {
				NOT = { owns_entire_state_region = STATE_LIGURIA }
			}
			s:STATE_LIGURIA = {
				add_claim = ROOT
			}
		}
		if = {
			limit = {
				NOT = { owns_entire_state_region = STATE_WEST_SWITZERLAND }
			}
			s:STATE_WEST_SWITZERLAND = {
				add_claim = ROOT
			}
		}
		add_modifier = {
			name = france_natural_borders_pursuit
			months = very_long_modifier_time
			# country_infamy_decay_mult
		}
		every_country = {
			limit = {
				NOT = { THIS = ROOT }
				any_scope_state = {
					OR = {
						state_region = s:STATE_FLANDERS
						state_region = s:STATE_WALLONIA
						state_region = s:STATE_LUXEMBOURG
						state_region = s:STATE_RHINELAND
						state_region = s:STATE_NORTH_RHINE
						state_region = s:STATE_LORRAINE
						state_region = s:STATE_ELSASS
						state_region = s:STATE_PFALZ
						state_region = s:STATE_LIGURIA
						state_region = s:STATE_WEST_SWITZERLAND
					}
				}
			}
			trigger_event = { id = natural_borders.4 }
		}
		hidden_effect = {
			every_country = {
				limit = {
					has_diplomatic_relevance = c:FRA
					NOT = { THIS = ROOT }
				}
				post_notification = fra_natural_borders_notification
			}
		}
	}
	# option = { # imperialist IG's unhappy
	# 	name = natural_borders.1.b
	# 	ai_chance = {
	# 		base = 0
	# 	}
	# 	custom_tooltip = {
	# 		text = dismiss_natural_borders_tt
	# 		set_variable = reject_natural_borders
	# 	}
	# 	every_interest_group = {
	# 		limit = {
	# 			is_powerful = yes
	# 			is_in_government = yes
	# 			OR = {
	# 				is_interest_group_type = ig_armed_forces
	# 				leader = {
	# 					OR = {
	# 						has_ideology = ideology:ideology_jingoist_leader
	# 						has_ideology = ideology:ideology_ethno_nationalist
	# 						has_ideology = ideology:ideology_fascist
	# 						has_ideology = ideology:ideology_authoritarian
	# 						has_ideology = ideology:ideology_bonapartist
	# 					}
	# 				}
	# 			}
	# 		}
	# 		add_modifier = {
	# 			name = no_natural_borders
	# 			months = long_modifier_time
	# 			is_decaying = yes
	# 			# interest_group_approval_add
	# 		}
	# 	}
	# }
}

# reward event
natural_borders.2 = {
	type = country_event
	placement = root
	title = natural_borders.2.t
	desc = natural_borders.2.d
	flavor = natural_borders.2.f

	duration = 3

	dlc = dlc004

	event_image = {
		video = "unspecific_signed_contract"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	trigger = {
		# triggered by je_french_natural_borders
	}

	option = { # assimilate the new states
		name = natural_borders.2.a
		default_option = yes
		add_modifier = {
			name = natural_borders_assimilation
			months = very_long_modifier_time
			# state_assimilation_mult
		}
	}

	option = { # empower imperialist IG's
		name = natural_borders.2.b
		trigger = {
			any_interest_group = {
				is_marginal = no
				OR = {
					is_interest_group_type = ig_armed_forces
					leader = {
						OR = {
							has_ideology = ideology:ideology_jingoist_leader
							has_ideology = ideology:ideology_ethno_nationalist
							has_ideology = ideology:ideology_fascist
							has_ideology = ideology:ideology_authoritarian
						}
					}
				}
			}
		}
		every_interest_group = {
			limit = {
				is_marginal = no
				OR = {
					is_interest_group_type = ig_armed_forces
					leader = {
						OR = {
							has_ideology = ideology:ideology_jingoist_leader
							has_ideology = ideology:ideology_ethno_nationalist
							has_ideology = ideology:ideology_fascist
							has_ideology = ideology:ideology_authoritarian
						}
					}
				}
			}
			add_modifier = {
				name = natural_borders_achieved
				months = long_modifier_time
				# interest_group_approval_add
				# interest_group_pol_str_mult
			}
		}
	}

	option = { # get French cultures as primary
		name = natural_borders.2.c
		add_primary_culture = cu:breton
		add_primary_culture = cu:occitan
		add_primary_culture = cu:francoprovencal
	}
}

# Notification event
natural_borders.4 = {
	type = country_event
	placement = scope:french_claim_state
	title = natural_borders.4.t
	desc = natural_borders.4.d
	flavor = {
		first_valid = {
			triggered_desc = {
				desc = natural_borders.4.f
				trigger = {
					NOT = {
						any_scope_state = {
							OR = {
								state_region = s:STATE_RHINELAND
								state_region = s:STATE_NORTH_RHINE
								state_region = s:STATE_ELSASS
								state_region = s:STATE_PFALZ
							}
						}
					}
				}
			}
			triggered_desc = {
				desc = natural_borders.4.f2
				trigger = {
					any_scope_state = {
						OR = {
							state_region = s:STATE_RHINELAND
							state_region = s:STATE_NORTH_RHINE
							state_region = s:STATE_ELSASS
							state_region = s:STATE_PFALZ
						}
					}
				}
			}
		}		
	}

	duration = 3

	dlc = dlc004

	event_image = {
		video = "europenorthamerica_before_the_battle"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	trigger = {
		# triggered by je_french_natural_borders
	}

	immediate = {
		c:FRA = {
			save_scope_as = france_scope
		}
		random_scope_state = {
			limit = {
				OR = {
					state_region = s:STATE_FLANDERS
					state_region = s:STATE_WALLONIA
					state_region = s:STATE_LUXEMBOURG
					state_region = s:STATE_RHINELAND
					state_region = s:STATE_NORTH_RHINE
					state_region = s:STATE_LORRAINE
					state_region = s:STATE_ELSASS
					state_region = s:STATE_PFALZ
					state_region = s:STATE_LIGURIA
					state_region = s:STATE_WEST_SWITZERLAND
				}
			}
			save_scope_as = french_claim_state
		}
	}

	option = { # Prepare for war
		name = natural_borders.4.a
		default_option = yes
		every_scope_state = {
			limit = {
				OR = {
					state_region = s:STATE_FLANDERS
					state_region = s:STATE_WALLONIA
					state_region = s:STATE_LUXEMBOURG
					state_region = s:STATE_RHINELAND
					state_region = s:STATE_NORTH_RHINE
					state_region = s:STATE_LORRAINE
					state_region = s:STATE_ELSASS
					state_region = s:STATE_PFALZ
					state_region = s:STATE_LIGURIA
					state_region = s:STATE_WEST_SWITZERLAND
				}
			}
			add_modifier = {
				name = rally_against_france
				months = long_modifier_time
				# state_conscription_rate_mult
			}
		}
		ai_chance = {
			base = 19
		}
	}

	option = { # Try to appease France
		name = natural_borders.4.b
		change_relations = {
			country = c:FRA
			value = 20
		}
		ai_chance = {
			base = 1
		}
	}
}