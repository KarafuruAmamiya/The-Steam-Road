namespace = arab_wars

# Start event (for subject)
arab_wars.1 = {
	type = country_event
	placement = root
	title = arab_wars.1.t
	desc = arab_wars.1.d
	flavor = arab_wars.1.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_political_extremism.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/political_extremism"

	icon = "gfx/interface/icons/event_icons/event_revolt.dds"

	trigger = {
	}

	immediate = {
		every_country = {
			limit = {
				OR = {
					country_is_in_middle_east = yes
					capital = { region = sr:region_north_africa }
					capital = { region = sr:region_nile_basin }
				}
				any_primary_culture = {
					has_discrimination_trait = arabic_heritage
				}
				is_subject = yes
				OR = {
					is_subject_type = subject_type_puppet
					is_subject_type = subject_type_dependency
					is_subject_type = subject_type_vassal
					is_subject_type = subject_type_dominion
				}
				any_overlord_or_above = {
					NOT = {
						any_primary_culture = {
							has_discrimination_trait = arabic_heritage
						}
					}
				}
				NOT = { has_technology_researched = nationalism }
			}
			add_technology_researched = nationalism
		}
		every_overlord_or_above = {
			limit = {
				NOT = {
					any_primary_culture = {
						has_discrimination_trait = arabic_heritage
					}
				}
			}
			save_scope_as = non_arab_overlord
		}
	}

	option = {
		name = arab_wars.1.a
		change_relations = {
			country = scope:non_arab_overlord
			value = -1000
		}
		hidden_effect = {
			set_secret_goal = {
				country = scope:non_arab_overlord
				secret_goal = antagonize
			}
		}
		set_global_variable = arab_rev
	}
}

# Start event (for overlord)
arab_wars.2 = {
	type = country_event
	placement = scope:arab_state
	title = arab_wars.2.t
	desc = arab_wars.2.d
	flavor = arab_wars.2.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_political_extremism.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/political_extremism"

	icon = "gfx/interface/icons/event_icons/event_revolt.dds"

	trigger = {
	}

	immediate = {
		every_scope_culture = {
			limit = {
				has_discrimination_trait = arabic_heritage
				NOT = { has_discrimination_trait = jewish_group }
			}
			save_scope_as = arab_culture
		}
		every_scope_state = {
			limit = {
                any_scope_pop = {
					culture = {
						has_discrimination_trait = arabic_heritage
					}
					pop_is_discriminated = yes
				}
				state_region = { 
					is_homeland = scope:arab_culture
				}
				OR = {
					state_is_in_middle_east = yes
					state_is_in_north_africa = yes
				}
            }
			save_scope_as = arab_state
		}
	}

	option = {
		name = arab_wars.2.a
		scope:arab_state = {
			add_radicals = {
                value = very_large_radicals
                culture = scope:arab_culture
            }
			add_modifier = {
				name = arab_revolt
				years = 10
			}
		}
	}
}