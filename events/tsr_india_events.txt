namespace = raj

# The Raj
raj.1 = {
	type = country_event
	placement = ROOT

	title = raj.1.t
	desc = raj.1.d
	flavor = raj.1.f

	duration = 3

	event_image = {
		video = "asia_hinduism_sikhism"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	minor_left_icon = c:PER
	minor_right_icon = c:RAJ

	trigger = {
	}

	immediate = {
		create_country = {
			tag = RAJ
			origin = THIS
			state = s:STATE_KONKAN.region_state:PER
			
			on_created = {
				if = {
					limit = {
						NOT = {
							has_law = law_type:law_oligarchy
						}
					}
					activate_law = law_type:law_oligarchy
				}
				if = {
					limit = {
						NOT = {
							has_law = law_type:law_racial_segregation
						}
					}
					activate_law = law_type:law_racial_segregation
				}
				if = {
					limit = {
						NOT = {
							has_law = law_type:law_state_religion
						}
					}
					activate_law = law_type:law_state_religion
				}
				if = {
					limit = {
						NOT = {
							has_law = law_type:law_appointed_bureaucrats
						}
					}
					activate_law = law_type:law_appointed_bureaucrats
				}
				if = {
					limit = {
						NOT = {
							has_law = law_type:law_peasant_levies
						}
					}
					activate_law = law_type:law_peasant_levies
				}
			}
		}
		c:PER = {
			save_scope_as = raj_overlord_country
		}
		set_variable = {
			name = persian_raj_var
		}
	}

	option = {
		name = raj.1.a
		default_option = yes
		custom_tooltip = activate_british_raj
		create_diplomatic_pact = {
			country = c:RAJ
			type = dominion
		}
		every_scope_state = {
			limit = {
				OR = {
					state_is_in_india = yes
					state_region = s:STATE_KASHMIR
				}
				NOR = {
					state_region = s:STATE_GUJARAT
					state_region = s:STATE_SAURASHTRA
					state_region = s:STATE_SINDH
				}
			}
			set_state_owner = c:RAJ
		}
		set_variable = doctrine_of_lapse_ended
		custom_tooltip = doctrine_of_lapse_disabled
		hidden_effect = {
			every_subject_or_below = {
				if = {
					limit = {
						OR = {
							is_subject_type = subject_type_puppet
							is_subject_type = subject_type_dominion
						}
						country_is_in_india = yes
					}
					make_independent = yes
					save_scope_as = new_raj_puppet
					c:RAJ = {
						create_diplomatic_pact = {
							country = scope:new_raj_puppet
							type = puppet
						}
					}
					change_relations = {
						country = root
						value = -100
					}
					change_relations = {
						country = c:RAJ
						value = -100
					}
				}
			}
		}
	}
	
	option = {
		name = raj.1.b
		trigger = {
			is_player = yes
		}
		custom_tooltip = activate_british_raj
		create_diplomatic_pact = {
			country = c:RAJ
			type = dominion
		}
		every_scope_state = {
			limit = {
				OR = {
					state_is_in_india = yes
					state_region = s:STATE_KASHMIR
				}
				NOR = {
					state_region = s:STATE_GUJARAT
					state_region = s:STATE_SAURASHTRA
					state_region = s:STATE_SINDH
				}
			}
			set_state_owner = c:RAJ
		}
		set_variable = doctrine_of_lapse_ended
		custom_tooltip = doctrine_of_lapse_disabled
		hidden_effect = {
			every_subject_or_below = {
				if = {
					limit = {
						OR = {
							is_subject_type = subject_type_puppet
							is_subject_type = subject_type_dominion
						}
						country_is_in_india = yes
					}
					make_independent = yes
					save_scope_as = new_raj_puppet
					c:RAJ = {
						create_diplomatic_pact = {
							country = scope:new_raj_puppet
							type = puppet
						}
					}
					change_relations = {
						country = root
						value = -100
					}
					change_relations = {
						country = c:RAJ
						value = -100
					}
				}
			}
		}
		
		play_as = c:RAJ
	}
}
# The Doctrine of Lapse
raj.2 = {
	type = country_event
	placement = ROOT

	title = raj.2.t
	desc = raj.2.d
	flavor = raj.2.f

	duration = 3

	event_image = {
		video = "asia_hinduism_sikhism"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	minor_left_icon = c:PER
	#minor_right_icon = scope:doctrine_of_lapse_target_country

	immediate = {
		random_state = {
			limit = {
				owner = {
					is_subject_of = ROOT
					any_primary_culture = {
						has_discrimination_trait = south_asian_heritage
					}
					is_player = no
					NOT = {
						is_subject_type = subject_type_dominion
					}
					OR = {
						ruler = {
							OR = {
								age < 16
								has_trait = senile
								has_trait = psychological_affliction
								has_trait = sickly
								has_trait = cancer
								has_trait = opium_addiction
								has_trait = cocaine_addiction
								has_trait = grifter
							}
						}
						NOT = {
							any_scope_character = {
								is_heir = yes
							}
						}
						any_scope_character = {
							is_heir = yes
							is_female = yes
						}
						has_variable = illegitimate_can_annex
					}
				}
			}
			save_scope_as = doctrine_of_lapse_target_state_1
		}
		random_state = {
			limit = {
				owner = {
					is_subject_of = ROOT
					any_primary_culture = {
						has_discrimination_trait = south_asian_heritage
					}
					is_player = no
					NOT = {
						is_subject_type = subject_type_dominion
					}
					OR = {
						ruler = {
							OR = {
								age < 16
								has_trait = senile
								has_trait = psychological_affliction
								has_trait = sickly
								has_trait = cancer
								has_trait = opium_addiction
								has_trait = cocaine_addiction
								has_trait = grifter
							}
						}
						NOT = {
							any_scope_character = {
								is_heir = yes
							}
						}
						any_scope_character = {
							is_heir = yes
							is_female = yes
						}
						has_variable = illegitimate_can_annex
					}
				}
				NOT = { this = scope:doctrine_of_lapse_target_state_1 }
			}
			save_scope_as = doctrine_of_lapse_target_state_2
		}
		random_state = {
			limit = {
				owner = {
					is_subject_of = ROOT
					any_primary_culture = {
						has_discrimination_trait = south_asian_heritage
					}
					is_player = no
					NOT = {
						is_subject_type = subject_type_dominion
					}
					OR = {
						ruler = {
							OR = {
								age < 16
								has_trait = senile
								has_trait = psychological_affliction
								has_trait = sickly
								has_trait = cancer
								has_trait = opium_addiction
								has_trait = cocaine_addiction
								has_trait = grifter
							}
						}
						NOT = {
							any_scope_character = {
								is_heir = yes
							}
						}
						any_scope_character = {
							is_heir = yes
							is_female = yes
						}
						has_variable = illegitimate_can_annex
					}
				}
				NOT = { this = scope:doctrine_of_lapse_target_state_1 }
				NOT = { this = scope:doctrine_of_lapse_target_state_2 }
			}
			save_scope_as = doctrine_of_lapse_target_state_3
		}
	}

	option = {
		name = raj.2.a
		default_option = yes
		scope:doctrine_of_lapse_target_state_1 = {
			add_radicals_in_state = {
				value = very_large_radicals
			}
		}
		annex = scope:doctrine_of_lapse_target_state_1.owner
		create_incident = {
			country = scope:doctrine_of_lapse_target_state_1.owner
			value = 20
		}
	}

	option = {
		name = raj.2.b
		trigger = {
			exists = scope:doctrine_of_lapse_target_state_2
		}
		scope:doctrine_of_lapse_target_state_2 = {
			add_radicals_in_state = {
				value = very_large_radicals
			}
		}
		annex = scope:doctrine_of_lapse_target_state_2.owner
		create_incident = {
			country = scope:doctrine_of_lapse_target_state_2.owner
			value = 20
		}
	}
	
	option = {
		name = raj.2.c
		trigger = {
			exists = scope:doctrine_of_lapse_target_state_3
		}
		scope:doctrine_of_lapse_target_state_3 = {
			add_radicals_in_state = {
				value = very_large_radicals
			}
		}
		annex = scope:doctrine_of_lapse_target_state_3.owner
		create_incident = {
			country = scope:doctrine_of_lapse_target_state_3.owner
			value = 20
		}
	}
}

# Cartridge Grease
#raj.3 = {
#	type = country_event
#	placement = ROOT
#
#	title = raj.3.t
#	desc = raj.3.d
#	flavor = raj.3.f
#
#	duration = 3
#
#	event_image = {
#		video = "middleeast_battlefield_trenches"
#	}
#
#	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
#
#	icon = "gfx/interface/icons/event_icons/event_military.dds"
#
#	trigger = {
#		NOT = { has_variable = greasy_cartridges }
#		any_scope_pop = {
#			is_pop_type = soldiers
#			OR = {
#				religion = rel:hindu
#				religion = rel:sunni
#				religion = rel:shiite
#			}
#		}
#	}
#
#	immediate = {
#		set_variable = greasy_cartridges
#	}
#
#	option = {
#		name = raj.3.a
#		# country_military_goods_cost_mult
#		add_modifier = {
#			name = changed_cartridges
#			months = normal_modifier_time
#		}
#
#		ai_chance = {
#			base = 25
#		}
#	}
#
#	option = {
#		name = raj.3.b
#		default_option = yes
#		add_radicals = {
#			pop_type = soldiers
#			religion = rel:hindu
#			value = large_radicals
#		}
#		add_radicals = {
#			pop_type = soldiers
#			religion = rel:sunni
#			value = large_radicals
#		}
#		add_radicals = {
#			pop_type = soldiers
#			religion = rel:shiite
#			value = large_radicals
#		}
#
#		ai_chance = {
#			base = 75
#		}
#	}
#}

# Overseas Service
raj.4 = {
	type = country_event
	placement = ROOT

	title = raj.4.t
	desc = raj.4.d
	flavor = raj.4.f

	duration = 3

	event_image = {
		video = "middleeast_battlefield_trenches"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	trigger = {
		c:PER ?= this
		any_scope_state = {
			state_is_in_india = yes
		}
		NOT = { has_variable = kala_pani_event }
		any_scope_pop = {
			is_pop_type = soldiers
			religion = rel:hindu
		}
	}

	immediate = {
		set_variable = {
			name = kala_pani_event
		}
		rel:hindu = { save_scope_as = hindu_pop }
	}

	option = {
		name = raj.4.a
		ig:ig_armed_forces = {
			add_modifier = {
				name = hindu_overseas_exemption
				months = normal_modifier_time
			}
		}

		ai_chance = {
			base = 25
		}
	}

	option = {
		name = raj.4.b
		default_option = yes
		add_radicals = {
			pop_type = officers
			religion = rel:hindu
			value = large_radicals
		}
		add_radicals = {
			pop_type = soldiers
			religion = rel:hindu
			value = large_radicals
		}

		ai_chance = {
			base = 75
		}
	}
}

# Suspected Conversion Project
raj.5 = {
	type = country_event
	placement = scope:missionaries_suspicion_state

	title = raj.5.t
	desc = raj.5.d
	flavor = raj.5.f

	duration = 3

	event_image = {
		video = "middleeast_islam"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	trigger = {
		c:PER ?= this
		any_scope_state = {
			state_is_in_india = yes
		}
		NOT = { has_variable = suspected_conversions }
		any_scope_state = {
			any_scope_pop = {
				OR = {
					religion = rel:hindu
					religion = rel:sunni
				}
			}
			any_scope_pop = {
				is_pop_type = clergymen
				religion = rel:shiite
			}
		}
	}

	immediate = {
		set_variable = {
			name = suspected_conversions
			years = 3
		}
		random_scope_state = {
			limit = {
				any_scope_pop = {
					OR = {
						religion = rel:hindu
						religion = rel:sunni
					}
				}
				any_scope_pop = {
					is_pop_type = clergymen
					religion = rel:shiite
				}
			}
			save_scope_as = missionaries_suspicion_state
			random_scope_pop = {
				limit = {
					is_pop_type = clergymen
					religion = rel:shiite
				}
				religion = { save_scope_as = suspected_missionaries }
			}
		}
	}

	option = {
		name = raj.5.a
		scope:missionaries_suspicion_state = {
			# state_conversion_mult
			add_modifier = {
				name = promised_no_proselytization
				months = long_modifier_time
			}
		}
		ig:ig_devout = {
			add_modifier = {
				name = promised_no_missionaries
				months = normal_modifier_time
			}
		}

		ai_chance = {
			base = 25
		}
	}

	option = {
		name = raj.5.b
		default_option = yes
		scope:missionaries_suspicion_state = {
			add_radicals_in_state = {
				religion = rel:hindu
				value = large_radicals
			}
			add_radicals_in_state = {
				religion = rel:sunni
				value = large_radicals
			}
		}

		ai_chance = {
			base = 75
		}
	}
}


# Hindustani Uprising
raj.6 = {
	type = country_event
	placement = c:GUJ.capital

	title = raj.6.t
	desc = raj.6.d
	flavor = raj.6.f

	duration = 3

	event_image = {
		video = "asia_sepoy_mutiny"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	immediate = {
		if = {
			limit = {
				NOT = { exists = c:GUJ }
				exists = s:STATE_GUJARAT.region_state:PER
			}
			create_country = {
				tag = GUJ
				origin = root
				state = s:STATE_GUJARAT.region_state:PER
				
				on_created = {
					if = {
						limit = {
							NOT = {
								has_law = law_type:law_homesteading
							}
						}
						activate_law = law_type:law_homesteading
					}
					if = {
						limit = {
							NOT = {
								has_law = law_type:law_slavery_banned
							}
						}
						activate_law = law_type:law_slavery_banned
					}
					if = {
						limit = {
							any_scope_state = {
								state_region = s:STATE_GUJARAT
							}
						}
						set_capital = STATE_GUJARAT
					}
				}
			}
		}
		else_if = {
			limit = {
				NOT = { exists = c:GUJ }
			}
			random_country = {
				limit = {
					is_secessionist = yes
					any_scope_state = {
						OR = {
							state_region = s:STATE_GUJARAT
							state_region = s:STATE_SAURASHTRA
						}
					}
				}
				change_tag = GUJ
				c:GUJ = {
					if = {
						limit = {
							NOT = {
								has_law = law_type:law_homesteading
							}
						}
						activate_law = law_type:law_homesteading
					}
					if = {
						limit = {
							NOT = {
								has_law = law_type:law_slavery_banned
							}
						}
						activate_law = law_type:law_slavery_banned
					}
					if = {
						limit = {
							any_scope_state = {
								state_region = s:STATE_GUJARAT
							}
						}
						set_capital = STATE_GUJARAT
					}
				}
			}
		}
		if = {
			limit = { 
				exists = s:STATE_SAURASHTRA.region_state:PER 
				owner = {
					NOT = { c:GUJ = this }
				}
			}
			s:STATE_SAURASHTRA.region_state:PER = { 
				set_state_owner = c:GUJ 
				remove_modifier = surat_riots
			}
		}
		if = {
			limit = { 
				exists = s:STATE_GUJARAT.region_state:PER 
				owner = {
					NOT = { c:GUJ = this }
				}
			}
			s:STATE_GUJARAT.region_state:PER = { 
				set_state_owner = c:GUJ 
				remove_modifier = surat_riots
			}
			c:GUJ = {
				set_capital = STATE_GUJARAT
			}
		}
		if = {
			limit = {
				NOT = {
					any_diplomatic_play = {
						any_scope_play_involved = { this = c:GUJ }
						any_scope_play_involved = { this = c:PER }
						is_diplomatic_play_type = dp_secession
					}
				}
			}
			create_diplomatic_play = {
				name = hindustani_uprising
				type = dp_annex_war
				escalation = 80
				target_country = c:GUJ
				
				add_war_goal = {
					holder = c:GUJ
					type = war_reparations
					target_country = root
					primary_demand = yes
				}
			}
		}
		c:GUJ = {
			add_modifier = {
				name = war_for_independence
				months = normal_modifier_time
			}
			capital = {
				save_scope_as = gujarat_state
			}
		}
	}

	option = {
		name = raj.6.a
		default_option = yes
		every_scope_state = {
			limit = {
				state_is_in_india = yes
			}
			add_radicals_in_state = {
				value = very_large_radicals
			}
		}
		
		add_journal_entry = {
			type = je_hindustani_uprising
		}
		
		hidden_effect = {
			every_subject_or_below = {
				limit = {
					country_is_in_india = yes
					any_primary_culture = {
						has_discrimination_trait = south_asian_heritage
					}
				}
				trigger_event = { id = raj.8 days = 1 }
			}
		}
	}

	option = {
		name = raj.6.b
		trigger = {
			is_player = yes
		}
		every_scope_state = {
			limit = {
				state_is_in_india = yes
			}
			add_radicals_in_state = {
				value = very_large_radicals
			}
		}
		
		add_journal_entry = {
			type = je_hindustani_uprising
		}
		
		hidden_effect = {
			every_subject_or_below = {
				limit = {
					country_is_in_india = yes
					any_primary_culture = {
						has_discrimination_trait = south_asian_heritage
					}
				}
				trigger_event = { id = raj.8 days = 1 }
			}
		}
		
		play_as = c:GUJ
	}
}

# End of Persian Rule in India
raj.7 = {
	type = country_event
	placement = ROOT

	title = raj.7.t
	desc = raj.7.d
	flavor = raj.7.f

	duration = 3

	event_image = {
		video = "middleeast_battlefield_trenches"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	trigger = {
		c:PER ?= this
	}

	immediate = {
		
	}

	option = {
		name = raj.7.a
		default_option = yes
		custom_tooltip = {
			text = india_princes_independent_tt
			break_up_raj = yes
		}
	}
}

# Hindustani Uprising (for subjects)
raj.8 = {
	type = country_event
	placement = ROOT

	title = raj.8.t
	desc = raj.8.d
	flavor = raj.8.f

	duration = 3

	event_image = {
		video = "asia_sepoy_mutiny"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	immediate = {
		c:GUJ = {
			save_scope_as = gujarat_scope
		}
		c:PER = {
			save_scope_as = per_scope
		}
	}

	option = {
		name = raj.8.a
		default_option = yes
		random_diplomatic_play = {
			limit = {
				initiator_is = c:PER
				target_is = c:GUJ
			}
			add_target_backers = {
				root
			}
			add_war_goal = {
				holder = root
				type = independence
				target_country = c:PER
				primary_demand = yes
			}
		}
		add_modifier = {
			name = war_for_independence
			months = 84
		}
		
		ai_chance = {
			base = 50
			modifier = {
				trigger = {
					c:PER = { relations:root <= relations_threshold:neutral }
				}
				add = 100
			}
		}
	}
	
	option = {
		name = raj.8.b
		ai_chance = {
			base = 50
		}
	}
}

namespace = indian_flavor

#Indian Flavor
indian_flavor.1 = { #Bundelkhand Succession Crisis
	type = country_event
	title = indian_flavor.1.t
	desc = indian_flavor.1.d
	flavor =  indian_flavor.1.f
	duration = 3
	
	gui_window = event_window_1char_tabloid

	left_icon = scope:gangadhar_rao_scope

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	
	trigger = {
		c:BUN ?= this
		exists = c:PER
		is_subject_of = c:PER
		game_date >= 1853.11.21
		ruler = {
			has_variable = is_gangadhar_rao
		}
		NOT = { has_variable = bundelkhand_succession_crisis }
	}
	immediate = {
		set_variable = bundelkhand_succession_crisis
		random_scope_character = {
			limit = {
				has_variable = is_gangadhar_rao
			}
			save_scope_as = gangadhar_rao_scope
		}
		create_character = {
			template = per_lakshmibai_character_template
			on_created = {
				set_variable = rani_lakshmibai
			}
		}
		random_scope_character = {
			limit = {
				has_variable = rani_lakshmibai
			}
			save_scope_as = lakshmibai_scope
		}
		if = {
			limit = {
				any_scope_character = {
					is_heir = yes
				}
				heir = {
					kill_character = yes
				}
			}
		}
	}
	option = {
		name = indian_flavor.1.a #Long Live the Rani
		default_option = yes
		random_scope_character = {
			limit = {
				has_variable = is_gangadhar_rao
			}
			kill_character = yes
		}
		show_as_tooltip = {
			create_character = {
				template = per_lakshmibai_character_template
			}
		}
		create_character = {
			template = per_damodar_rao_character_template
			on_created = {
				set_variable = damodar_rao
			}
		}
		
		hidden_effect = {
			c:PER = {
				trigger_event = { id = indian_flavor.2 }
			}
		}
	}
}

indian_flavor.2 = { #Rani Lakhsmibai
	type = country_event
	title = indian_flavor.2.t
	desc = indian_flavor.2.d
	flavor =  indian_flavor.2.f
	duration = 3
	
	gui_window = event_window_1char_tabloid

	left_icon = scope:lakshmibai_scope

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	immediate = {
		random_character = {
			limit = {
				has_variable = rani_lakshmibai
			}
			save_scope_as = lakshmibai_scope
		}
		random_character = {
			limit = {
				has_variable = damodar_rao
			}
			save_scope_as = damodar_rao_scope
		}
		c:BUN = {
			save_scope_as = bundelkhand_scope
			set_variable = illegitimate_can_annex
		}
	}
	option = {
		name = indian_flavor.2.a #Let her rule for now
	}
	option = {
		name = indian_flavor.2.b #Damodar Rao cannot succeed the satrapy!
		default_option = yes
		change_relations = {
			country = c:BUN
			value = -100
		}
	}
}

indian_flavor.3 = { #Surat Riots
	type = country_event
	placement = scope:gujarat_scope
	title = indian_flavor.3.t
	desc = indian_flavor.3.d
	flavor =  indian_flavor.3.f
	duration = 3
	
	event_image = {
		video = "middleeast_police_breaking_door"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"
	
	immediate = {
		random_scope_state = {
			limit = {
				state_region = s:STATE_GUJARAT
			}
			save_scope_as = gujarat_scope
		}
		random_scope_state = {
			limit = {
				state_region = s:STATE_SAURASHTRA
			}
			save_scope_as = saurashtra_scope
		}
	}
	option = {
		name = indian_flavor.3.a
		default_option = yes
		
		scope:gujarat_scope = {
			add_modifier = {
				name = surat_riots
				months = -1
			}
			add_radicals_in_state = {
				culture = cu:gujarati
				value = very_large_radicals
			}
		}
		
		scope:saurashtra_scope = {
			add_modifier = {
				name = surat_riots
				months = -1
			}
			add_radicals_in_state = {
				culture = cu:gujarati
				value = very_large_radicals
			}
		}
	}
}

indian_flavor.4 = { #Agriculturists Relief Act
	type = country_event
	placement = scope:gujarat_scope
	title = indian_flavor.4.t
	desc = indian_flavor.4.d
	flavor =  indian_flavor.4.f
	duration = 3
	
	event_image = {
		video = "asia_politician_parliament_motion"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	immediate = {
		random_scope_state = {
			limit = {
				state_region = s:STATE_GUJARAT
			}
			save_scope_as = gujarat_scope
		}
		random_scope_state = {
			limit = {
				state_region = s:STATE_SAURASHTRA
			}
			save_scope_as = saurashtra_scope
		}
	}
	option = {
		name = indian_flavor.4.a
		default_option = yes
		
		every_scope_state = {
			limit = {
				has_modifier = surat_riots
			}
			remove_modifier = surat_riots
			add_modifier = {
				name = gujarat_relief_act
				months = normal_modifier_time
			}
		}
	}
}

indian_flavor.5 = { #Peasants Revolt
	type = country_event
	placement = scope:revolt_state_scope
	title = indian_flavor.5.t
	desc = indian_flavor.5.d
	flavor =  indian_flavor.5.f
	duration = 3
	
	event_image = {
		video = "middleeast_police_breaking_door"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_revolt.dds"
	
	trigger = {
		NOT = {
			has_variable = peasant_riots
		}
		any_scope_state = {
			OR = {
				state_region = s:STATE_GUJARAT
				state_region = s:STATE_SAURASHTRA
			}
			NOT = { has_variable = peasant_riots_var }
		}
	}
	
	immediate = {
		random_scope_state = {
			limit = {
				OR = {
					state_region = s:STATE_GUJARAT
					state_region = s:STATE_SAURASHTRA
				}
				NOT = { has_variable = peasant_riots_var }
			}
			save_scope_as = revolt_state_scope
			set_variable = peasant_riots_var
		}
		every_primary_culture = {
			save_scope_as = primary_culture_scope
		}
		every_neighbouring_state = {
			limit = {
				state_is_in_india = yes
				owner = {
					any_primary_culture = {
						has_discrimination_trait = south_asian_heritage
					}
				}
			}
			owner = {
				save_scope_as = outraged_indian_country
			}
		}
		set_variable = peasant_riots
	}
	option = {
		name = indian_flavor.5.a #Ignore the protesters
		default_option = yes
		
		scope:revolt_state_scope = {
			add_radicals_in_state = {
				value = large_radicals
				culture = cu:gujarati
			}
			add_radicals_in_state = {
				value = medium_radicals
				culture = scope:primary_culture_scope
			}
		}
		custom_tooltip = indian_flavor.5.tt1 #Your lack of response could escalate the situation
		hidden_effect = { 
			random_list = {
				75 = { 
					trigger_event = { 
						id = indian_flavor.8 days = 30
					}
				}
				25 = {
				}
			}
		}
	}
	option = {
		name = indian_flavor.5.b #Arrest the provocators
		trigger = {
			OR = {
				has_law = law_type:law_censorship
				has_law = law_type:law_outlawed_dissent
			}
		}
		scope:revolt_state_scope = {
			add_radicals_in_state = {
				value = very_large_radicals
				culture = cu:gujarati
			}
		}
		custom_tooltip = indian_flavor.5.tt2 #Your response could keep the situation from escalating
		hidden_effect = { 
			random_list = {
				25 = { 
					trigger_event = { 
						id = indian_flavor.8 days = 30
					}
				}
				75 = {
				}
			}
		}
	}
	option = {
		name = indian_flavor.5.c #Bring in the guns
		trigger = {
			OR = {
				has_law = law_type:law_national_guard
				has_law = law_type:law_militarized_police
			}
		}
		scope:revolt_state_scope = {
			add_radicals_in_state = {
				value = very_large_radicals
				culture = cu:gujarati
			}
			add_modifier = {
				name = police_crackdown
				months = 12
			}
		}
		change_infamy = 5
		change_relations = {
			country = scope:outraged_indian_country
			value = -30
		}
		custom_tooltip = indian_flavor.5.tt3 #Your response will most likely escalate the situation
		hidden_effect = { 
			random_list = {
				95 = { 
					trigger_event = { 
						id = indian_flavor.8 days = 30
					}
				}
				5 = {
				}
			}
		}
		
		ai_chance = {
			base = 50
		}
	}
	option = {
		name = indian_flavor.5.d #Try to listen to what they have to say
		trigger = {
			has_law = law_type:law_guaranteed_liberties
		}
		scope:revolt_state_scope = {
			add_radicals_in_state = {
				value = medium_radicals
				culture = cu:gujarati
			}
		}
		custom_tooltip = indian_flavor.5.tt2 #Your response could keep the situation from escalating
		hidden_effect = { 
			random_list = {
				25 = { 
					trigger_event = { 
						id = indian_flavor.8 days = 30
					}
				}
				75 = {
				}
			}
		}
	}
}

indian_flavor.6 = { #Mobs disrupt ports
	type = country_event
	placement = scope:port_scope
	title = indian_flavor.6.t
	desc = indian_flavor.6.d
	flavor =  indian_flavor.6.f
	duration = 3
	
	event_image = {
		video = "middleeast_police_breaking_door"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_revolt.dds"
	
	cooldown = 12
	
	immediate = {
		random_scope_state = {
			limit = {
				OR = {
					state_region = s:STATE_GUJARAT
					state_region = s:STATE_SAURASHTRA
				}
			}
			save_scope_as = port_scope
		}
		every_primary_culture = {
			save_scope_as = primary_culture_scope
		}
	}
	option = {
		name = indian_flavor.6.a #Ignore them
		scope:port_scope = {
			add_radicals_in_state = {
				value = medium_radicals
				culture = scope:primary_culture_scope
			}
			add_modifier = {
				name = ports_disrupted
				months = 24
			}
		}
	}
	option = {
		name = indian_flavor.6.b #Crack down on the rioters
		default_option = yes
		scope:port_scope = {
			add_radicals_in_state = {
				value = very_large_radicals
				culture = cu:gujarati
			}
		}
	}
}

indian_flavor.7 = { #Restoring Order
	type = country_event
	placement = scope:riots_state
	title = indian_flavor.7.t
	desc = indian_flavor.7.d
	flavor =  indian_flavor.7.f
	duration = 3
	
	event_image = {
		video = "middleeast_police_breaking_door"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_revolt.dds"
	
	trigger = {
		OR = {
			has_law = law_type:law_militarized_police
			has_law = law_type:law_national_guard
			has_law = law_type:law_guaranteed_liberties
		}
		any_scope_state = {
			OR = {
				state_region = s:STATE_GUJARAT
				state_region = s:STATE_SAURASHTRA
			}
			turmoil >= 0.3
		}
		NOT = { has_variable = restoring_order }
		OR = {
			institution_investment_level = {
				institution = institution_law_enforcement
				value >= 2
			}
			institution_investment_level = {
				institution = institution_home_affairs
				value >= 2
			}
		}
	}
	
	immediate = {
		set_variable = restoring_order
		random_scope_state = {
			limit = {
				AND = {
					OR = {
						state_region = s:STATE_GUJARAT
						state_region = s:STATE_SAURASHTRA
					}
					OR = {
						has_decree = decree_violent_suppression
						has_decree = decree_emergency_relief
					}
				}
			}
			save_scope_as = riots_state
		}
		capital = {
			save_scope_as = capital_state
		}
	}
	option = {
		name = indian_flavor.7.a #Tighten security in the region 
		trigger = {
			OR = {
				has_law = law_type:law_militarized_police
				has_law = law_type:law_national_guard
			}
		}
		scope:riots_state = {
			add_modifier = {
				name = harsh_suppression
				months = 24
			}
		}
	}
	option = {
		name = indian_flavor.7.b #Prioritize delivering aid
		trigger = {
			OR = {
				has_law = law_type:law_guaranteed_liberties
			}
		}
		scope:riots_state = {
			add_modifier = {
				name = relief_packages
				months = 24
			}
		}
	}
	option = {
		name = indian_flavor.7.c #We don't have money to waste on this
		default_option = yes
		add_modifier = {
			name = ignored_turmoil
			months = 24
		}
	}
}

indian_flavor.8 = { #Full-Blown Revolt
	type = country_event
	placement = scope:revolution_scope
	title = indian_flavor.8.t
	desc = indian_flavor.8.d
	flavor =  indian_flavor.8.f
	duration = 3
	
	event_image = {
		video = "asia_sepoy_mutiny"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_revolt.dds"
	
	immediate = {
		random_scope_state = {
			limit = {
				has_variable = peasant_riots_var
			}
			save_scope_as = revolution_scope
			add_devastation = 15
		}
		random_scope_state = {
			limit = {
				OR = {
					state_region = s:STATE_GUJARAT
					state_region = s:STATE_SAURASHTRA
				}
				NOT = { has_variable = peasant_riots_var }
			}
			save_scope_as = neighbour_scope
		}
		every_country = {
			limit = {
				country_is_in_india = yes
				owner = {
					any_primary_culture = {
						has_discrimination_trait = south_asian_heritage
					}
				}
			}
			save_scope_as = outraged_indian_country
		}
		every_primary_culture = {
			save_scope_as = primary_culture_scope
		}
	}
	option = {
		name = indian_flavor.8.a #Gun them down!
		default_option = yes
		trigger = {
			OR = {
				has_law = law_type:law_national_guard
				has_law = law_type:law_militarized_police
			}
		}
		create_incident = {
			country = root
			value = 20
		}
		change_relations = {
			country = scope:outraged_indian_country
			value = -30
		}
		scope:revolution_scope = {
			add_radicals_in_state = {
				value = very_large_radicals
				culture = cu:gujarati
			}
		}
		kill_population_percent_in_state = {
			percent = 0.02
			culture = cu:gujarati
			pop_type = peasants
		}
		kill_population_percent_in_state = {
			percent = 0.02
			culture = cu:gujarati
			pop_type = farmers
		}
		custom_tooltip = indian_flavor.8.tt1 #Your actions will most likely cause the revolt to spread!
		hidden_effect = { 
			random_list = {
				75 = { 
					trigger_event = { 
						id = indian_flavor.9 days = 30
					}
				}
				25 = {
				}
			}
		}
		ai_chance = {
			base = 50
		}
	}
	option = {
		name = indian_flavor.8.b #Let the revolt runs it course
		scope:revolution_scope = {
			add_radicals_in_state = {
				value = very_large_radicals
				culture = cu:gujarati
			}
			add_radicals_in_state = {
				value = medium_radicals
				culture = primary_culture_scope
			}
		}
		custom_tooltip = indian_flavor.8.tt2 #Your lack of response could cause the revolt to spread!
		hidden_effect = { 
			random_list = {
				50 = { 
					trigger_event = { 
						id = indian_flavor.9 days = 30
					}
				}
				50 = {
				}
			}
		}
	}
	option = {
		name = indian_flavor.8.c #We must pass their demands to the parliament
		trigger = {
			any_interest_group = {
				is_in_government = yes
				is_marginal = no
				law_stance = {
					law = law_type:law_slavery_banned
					value > neutral
				}
			}
			NOT = { has_journal_entry = je_government_petition }
		}
		scope:revolution_scope = {
			add_radicals_in_state = {
				value = medium_radicals
				culture = cu:gujarati
			}
		}
		custom_tooltip = indian_flavor.8.tt3 #Your action could de-escalate the situation, but you must fulfill their demands
		set_variable = surat_riots_demands
		add_journal_entry = { type = je_government_petition }
		hidden_effect = { 
			random_list = {
				5 = { 
					trigger_event = { 
						id = indian_flavor.9 days = 30
					}
				}
				95 = {
				}
			}
		}
	}
}

indian_flavor.9 = { #Revolts Spread
	type = country_event
	placement = scope:spreading_revolt_state
	title = indian_flavor.9.t
	desc = indian_flavor.9.d
	flavor =  indian_flavor.9.f
	duration = 3
	
	event_image = {
		video = "asia_sepoy_mutiny"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_revolt.dds"
	
	immediate = {
		random_scope_state = {
			limit = {
				OR = {
					state_region = s:STATE_GUJARAT
					state_region = s:STATE_SAURASHTRA
				}
				NOT = { has_variable = peasant_riots_var }
			}
			add_devastation = 15
			set_variable = peasant_riots_var
			save_scope_as = spreading_revolt_state
		}
		every_country = {
			limit = {
				country_is_in_india = yes
				owner = {
					any_primary_culture = {
						has_discrimination_trait = south_asian_heritage
					}
				}
			}
			save_scope_as = outraged_indian_country
		}
		every_primary_culture = {
			save_scope_as = primary_culture_scope
		}
	}
	option = {
		name = indian_flavor.8.a #Gun them down!
		default_option = yes
		trigger = {
			OR = {
				has_law = law_type:law_national_guard
				has_law = law_type:law_militarized_police
			}
		}
		create_incident = {
			country = root
			value = 20
		}
		change_relations = {
			country = scope:outraged_indian_country
			value = -30
		}
		scope:revolution_scope = {
			add_radicals_in_state = {
				value = very_large_radicals
				culture = cu:gujarati
			}
		}
		kill_population_percent_in_state = {
			percent = 0.02
			culture = cu:gujarati
			pop_type = peasants
		}
		kill_population_percent_in_state = {
			percent = 0.02
			culture = cu:gujarati
			pop_type = farmers
		}
		ai_chance = {
			base = 50
		}
	}
	option = {
		name = indian_flavor.8.b #Let the revolt runs it course
		scope:revolution_scope = {
			add_radicals_in_state = {
				value = very_large_radicals
				culture = cu:gujarati
			}
			add_radicals_in_state = {
				value = medium_radicals
				culture = primary_culture_scope
			}
		}
	}
	option = {
		name = indian_flavor.8.c #We must pass their demands to the parliament
		trigger = {
			NOT = { has_variable = surat_riots_demands }
			any_interest_group = {
				is_in_government = yes
				is_marginal = no
				law_stance = {
					law = law_type:law_slavery_banned
					value > neutral
				}
			}
			NOT = { has_journal_entry = je_government_petition }
		}
		scope:revolution_scope = {
			add_radicals_in_state = {
				value = medium_radicals
				culture = cu:gujarati
			}
		}
		set_variable = surat_riots_demands
		add_journal_entry = { type = je_government_petition }
	}
}